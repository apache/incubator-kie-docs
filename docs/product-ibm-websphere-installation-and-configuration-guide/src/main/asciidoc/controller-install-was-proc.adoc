[id='controller-install-was-proc']
= Installing the Controller

This section describes how to install the Controller on {WEBSPHERE}.

You can install the Controller and use the REST API or the {KIE_SERVER} Java Client API to interact with it.

.Prerequisites
* An {WEBSPHERE_SHORT} instance configured as described in this document
* Sufficient user permissions to complete the installation
* The `rhdm-7.0-controller-ee7.zip` file, extracted  and repacked to the `controller.war` file

.Procedure
. Click *Applications* -> *Application Types* -> *WebSphere Enterprise Applications*.
+
This shows you all of the existing applications in the system and enables you to install a new one.

. Click *Install*.
. Upload the Controller WAR file (`controller.war`) from the local file system.
. Select *Fast Path* and click *Next*.
+
The *Install New Application* wizard opens.

. In the *Map Virtual Hosts for Web Modules* section, keep the default values and click *Next*.
. Set the context root to `controller`.
. In the *Metadata for Modules* section, keep the default values and click *Next*.
. Click *Finish* to install the controller.
. Click *Save* to save the changes to the master configuration.

== Mapping Groups to Roles

Map the `controller` role to a user or a group.

.Procedure
. Go back to the main configuration page for the newly installed `kie-server` application (*Applications* -> *Application Types* -> *WebSphere Enterprise Applications*).
. Click *Security Role to User/Group Mapping* under *Detail Properties*.
. Select the `kie-server` role and click *Map Groups* to search for the `kie-server` group.
. Move the `controller` group from the *Available* list to the *Selected* list and click *OK*. This mapping gives the previously created administrator user access to the {KIE_SERVER}.
. Click *Save* and start the `kie-server` application.

== Verifying the installation
After you install and start the controller, verify that it works correct.

.Procedure
. To verify that the Controller is working on {WEBSPHERE_SHORT}, enter the following command:
+
[source]
----
curl -X GET "http://<HOST>:<PORT>/controller/rest/controller/management/servers" -H  "accept: application/xml" -u '<CONTROLLER>:<CONTROLLER_PWD>'
----
+
In this command, replace `<CONTROLLER>` and `<CONTROLLER_PWD>` with the user credentials that you created in this section.
+
The output of this command provides information about the {KIE_SERVER} instance.

. Check whether the Controller REST API works by sending a GET request at `http://<TARGET_SERVER>:<PORT>/kie-server/services/rest/server`.
