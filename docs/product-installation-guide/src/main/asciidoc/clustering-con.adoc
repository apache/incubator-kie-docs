[id='clustering-con']
= Clustering  {PRODUCT} 

By clustering two or more computers, you have the benefits of high availability, enhanced collaboration, and load balancing. High availability decreases the chance of a loss of data when a single computer fails because data on all of the computers (nodes) of the cluster is replicated on each node of the cluster. When a computer fails, another computer fills the gap by providing a copy of the data that was on the failed computer. When the failed computer comes online again, it resumes its place in the cluster. Load balancing shares the computing load across the nodes of the cluster. Doing this improves the overall performance of the cluster.

There are several ways that you can cluster {PRODUCT} components. This document describes how to cluster the following scenarios:

* Clustering a {PRODUCT} development environment
* Clustering a {KIE_SERVER} standalone runtime environment
* Clustering a {KIE_SERVER} runtime environment that is managed by the standalone {KIE_SERVER} controller

== Clustering {PRODUCT} for a development environment
Developers use {PRODUCT} to create rules and processes that users then run for a runtime environment to assist with decision making. The primary benefit of clustering {PRODUCT} development environments is high availability and enhanced collaboration. For example, if clustering is configured and Developer X is authoring rules on {CENTRAL} Node1 then Developer Y, who is working on {CENTRAL} Node2, can see the rules authored by Developer X as they are created. Furthermore, all of the developers working on individual nodes of the cluster will see the same synchronized content. In addition, clustering provides high availability in the rules development environment. If Developer X is working on Node1 and that node fails, Developer X's work is preserved and visible on any other node of the cluster.

Most development environments consist of {CENTRAL} for creating rules and processes and at least one {KIE_SERVER} to test those rules and processes. 

[NOTE]
====
You can also use this configuration for runtime environemtns if you want to use {CENTRAL} to manage the {KIE_SERVER}s in the cluster.
====

.Prerequiste
* An NFS server with a mounted partition accessible to an {EAP} user is available.

.Procedure
. Set up a {EAP} 7.1 cluster as described in  https://access.redhat.com/documentation/en-us/reference_architectures/2017/html-single/configuring_a_red_hat_jboss_eap_7_cluster/[_Configuring a {EAP} 7 Cluster_].
. Install and configure Elasticsearch as described in <<clustering-elasticsearch-proc_{context}>>.
. Install and configure AMQ Broker as described in <<clustering-artemis-activate-proc_{context}>>.
. Install and configure {CENTRAL} as described in <<clustering-dm-install-proc_{context}>>.

== Clustering {KIE_SERVER} for a runtime environment
In a runtime environment, {KIE_SERVER} runs rules and processes that support business decisions. The primary benefit of clustering a {KIE_SERVER} runtime environment is load balancing. If activity on one node of the cluster increases, that activity can be shared among the other nodes of the cluster to improve performance.

=== Clustering {KIE_SERVER} for a standalone runtime environment

.Prerequiste
* An NFS server with a mounted partition accessible to an {EAP} user is available.

.Procedure
. Set up a {EAP} 7.1 cluster as described in  https://access.redhat.com/documentation/en-us/reference_architectures/2017/html-single/configuring_a_red_hat_jboss_eap_7_cluster/[_Configuring a {EAP} 7 Cluster_].
. Install and configure Elasticsearch as described in <<clustering-elasticsearch-proc_{context}>>.
. Install and configure AMQ Broker as described in <<clustering-artemis-activate-proc_{context}>>.
. Install and configure {CENTRAL} as described in <<clustering-kie-server-install-proc_{context}>>.

=== Clustering a {KIE_SERVER} runtime environment managed by the standalone {KIE_SERVER} controller
.Prerequiste
* An NFS server with a mounted partition accessible to an {EAP} user is available.

.Procedure
. Set up a {EAP} 7.1 cluster as described in  https://access.redhat.com/documentation/en-us/reference_architectures/2017/html-single/configuring_a_red_hat_jboss_eap_7_cluster/[_Configuring a {EAP} 7 Cluster_].
. Install and configure Elasticsearch as described in <<clustering-elasticsearch-proc_{context}>>.
. Install and configure AMQ Broker as described in <<clustering-artemis-activate-proc_{context}>>.
. Install and configure the standalone {KIE_SERVER} controller as described in <<clustering-standalone-pc-proc>>.
. Install and configure Smart Router as described in <<clustering-smartrouter-pc-proc>>.


ifdef::DM[]
[NOTE]
====
This section is specifically intended for {CENTRAL} development environments where you want to cluster the Git repository. It is not necessary to create a clustered environment for {KIE_SERVER} production environments.
====
endif::[]  

Red Hat supports clustering {PRODUCT} on {EAP} 7.1. To create a {PRODUCT} cluster, set up a {EAP} 7.1 cluster as described in  https://access.redhat.com/documentation/en-us/reference_architectures/2017/html-single/configuring_a_red_hat_jboss_eap_7_cluster/[_Configuring a {EAP} 7 Cluster_], then following the instructions in this document.
