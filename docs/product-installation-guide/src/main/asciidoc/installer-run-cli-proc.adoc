[[installer-run-cli-proc]]
= Installing Red Hat JBoss BPM Suite Using Installer in CLI Mode

The installer for Red Hat JBoss BPM Suite can also be executed through the command-line interface (CLI). The procedure below demonstrates the steps that you are likely to encounter using this option to install Red Hat JBoss BPM Suite.

[float]
==== Prerequisite

Before attempting to install {PRODUCT}, ensure you have already installed {EAP} 6, version 6.4.7 or higher, and create a back up. Ensure that your user has sufficient rights to complete the installation.

Make sure you have the JAR binary present in `$PATH` before running the installer. On Red Hat Enterprise Linux, it is present in the package `java-$_JAVA_VERSION_-openjdk-devel`.

. Navigate to the folder where you downloaded the installer file in a command prompt and execute the following command.
+
[source]
----
java -jar jboss-bpmsuite-VERSION-installer.jar -console
----

. The command-line interactive process will start and display the End-User license agreement. You will be prompted to select an option at the end of this license:
+
[source]
----
press 1 to continue, 2 to quit, 3 to redisplay.
----

. Enter `1` to begin the installation and type in the parent directory of an existing {EAP} installation.
+
[source]
----
The location below must specify the JBOSS_HOME of an existing {EAP} installation.

[/home/user/BPMSuite-VERSION/jboss-eap-6.4]
----
+
The installer will verify the location of the {EAP} installation at the provided location. Enter `1` to confirm and continue.

. _Optional_: create a user for the management console of {EAP} (ManagementRealm):
+
[source]
----
Create an administrative user
This user will be added to the host container's management realm for administrative purposes. It can be used to access the management console, the management CLI or other applications secured in this realm.
----
+
Enter `0` to skip creating a new administrative user or `1` to create one. If you do decide to create one, then follow these steps:
+
.. Enter a user name:
+
[source]
----
Admin username: [admin]
----
.. Create and confirm a password for the user of the {EAP} management console:
+
[source]
----
The password must have at least 8 characters, and contain at least one number and one non-alphanumeric symbol (not including the character &).

Admin password: []

Confirm admin password: [******************************]
----

+
After this user has been created successfully, continue to the next step.

. Create a Red Hat JBoss BPM Suite administrator user.
+
[source]
----
Create a Business Process Management Suite Admin User
Create a BPM Suite admin user. The user will be added to the ApplicationRealm, and can be used to access the Business Central Console. The User will be assigned the 'admin' application roles. The BPM Suite username cannot be any of the following: 'admin', 'analyst', 'user', 'manager' or 'developer'.

BPM Suite username: [bpmsAdmin]
----
+
[IMPORTANT]
====
Make sure that the selected user name does _not_ conflict with any known title of a role or a group.

For example, if there is a role called `admin`, you should _not_ create a user with the user name `admin`.
====

. Enter a user name for this user and then create and confirm a password.
+
[source]
----
The password must have at least 8 characters, and contain at least one number and one non-alphanumeric symbol (not including the character &).

BPM Suite password: []

Confirm BPM Suite password: [****************]
----

. After the passwords have been entered and confirmed, you will be given an optional step to define other roles for this user (besides the `admin` role). Enter these roles in a comma-separated list or just press *Enter* to skip this part.
+
[source]
----
(Optional) You can add this user to additional roles that will be used for task management.  These roles are custom named and used again when building your processes with human tasks.  Add your custom named roles in a comma separated list below.

Additional user roles: []
----

. Configure the Java Security Manager by either pressing `1` to select it or `0` to deselect it.
+

[source]
----
Configure the Java Security Manager
A Java security manager offers JVM level security beyond what is provided by the application container. It enforces access rules at the JVM runtime based on one or more security policies.

This installer will place two security policies in the installation directory with the filenames 'security.policy' and 'kie.policy' regardless of choice. Those policies will be enabled at runtime if the option below is selected.

Please note that a security manager imposes a significant performance overhead when enabled. It is suggested the included policies be applied in production if user requirements call for a stronger measure than what is already provided by the application container's authentication and authorization mechanism.

Please see the JBoss Business Process Management Suite administrative documentation for further details and consideration.
[ ] Enable the Java security manager
Input 1 to select, 0 to deselect:
----

. After the Java Security Manager choice, choose an option from the prompt below:
+
[source]
----
press 1 to continue, 2 to quit, 3 to redisplay.
----

. Specify whether or not you are using IPv6.
+
[source]
----
IPv6 configuration

If this computer is using a pure IPv6 configuration, please check the box below. A pure IPv6 setup requires additional configuration at runtime to ensure the proper bindings of the management and http interfaces.
[ ] Enable pure IPv6 configuration
Input 1 to select, 0 to deselect:
----
+
After selecting or deselecting IPv6 configuration, select one of the following options:
+
[source]
----
press 1 to continue, 2 to quit, 3 to redisplay.
----

. Configure the runtime environment by either choosing the default configuration or advanced options.
+
[source]
----
Configure runtime environment
Red Hat JBoss Business Process Management Suite can be further customized at this time.
0  [x] Perform default configuration
1  [ ] Perform advanced configuration
----
+
If you select `1`, *Perform advanced configuration*, complete the following configurations:
+
a. {empty}
+
[source]
----
  [ ] Install password vault
Input 1 to select, 0 to deselect:
----
b. {empty}
+
[source]
----
  [ ] Enable SSL security
Input 1 to select, 0 to deselect:
----
c. {empty}
+
[source]
----
  [ ] Secure {EAP} Management Console with LDAP
Input 1 to select, 0 to deselect:
----
d. {empty}
+
[source]
----
  [ ] Secure Business Central and Dashbuilder with LDAP
Input 1 to select, 0 to deselect:
----
e. {empty}
+
[source]
----
  [ ] Add a security-domain
Input 1 to select, 0 to deselect:
----
f. {empty}
+
[source]
----
  [ ] Generate JMS Client Keystores
Input 1 to select, 0 to deselect:
----
g. {empty}
+
[source]
----
  [ ] Install clustered configuration
Input 1 to select, 0 to deselect:
----
h. {empty}
+
[source]
----
  [ ] Install Business-Central Datasource
Input 1 to select, 0 to deselect:
----
i. {empty}
+
[source]
----
  [ ] Install Dashbuilder Datasource
Input 1 to select, 0 to deselect:
----
j. {empty}
+
[source]
----
  [ ] Configure Optaplanner Execution Server
Input 1 to select, 0 to deselect:
----
k. {empty}
+
[source]
----
  [ ] Configure KIE Server management
Input 1 to select, 0 to deselect:
----

. Next, choose an option from the prompt below:
+
[source]
----
press 1 to continue, 2 to quit, 3 to redisplay.
----

. The `.jar` file begins the unpacking and configuration.

. After a successful installation, the command line will ask you if you would like to generate an automatic installation script and properties file.
+

[source]
----
Installation has completed successfully.
Application installed on /home/user/BPMSuite-VERSION/jboss-eap-6.4
Would you like to generate an automatic intallation script and properties file?
(y/n) [n]:
----

. If you select `y`, provide a path for the automatic installation script:
+

[source]
----
Select path for the automatic installation script: [/home/user/BPMSuite-VERSION/jboss-eap-6.4/AUTO_SCRIPT_FILENAME]
----
+
This generated script will enable the user to run the installer in the following way for future installations:
+
[source]
----
java -jar jboss-bpmsuite-VERSION-installer.jar AUTO_SCRIPT_FILENAME
----
+
[NOTE]
====
Running the installer in this way will result in an installation identical to the installation from which the auto script was generated. Note that sensitive values, such as passwords, will need to be provided from an external file or provided at auto installation time. The optional argument below enables the user to provide these values automatically:

[source]
----
-variablefile VARIABLE_FILENAME
----

Sensitive values can also be provided using the following argument:

[source]
----
-variables key1=value1,key2=value2
----
====

. The command-line will provide the following message upon a successful auto script creation and/or console installation:
+
[source]
----
XML written successfully.
[ Console installation done ]
[BPMS_Installer]$
----

. Start {EAP} as described in _starting_the_server2 COMMENT:link.

. Navigate to `http://localhost:8080/business-central` in a web browser.

. Log in with the correct user name/password as given to the Red Hat JBoss BPM Suite user in the _Create and confirm a password for the Red Hat JBoss BPM Suite user_ step.
