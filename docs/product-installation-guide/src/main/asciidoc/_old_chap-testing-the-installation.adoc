[id='_chap_testing_the_installation']
= Testing Installation

[id='_starting_the_server2']
== Starting Server

[NOTE]
====
If you installed {PRODUCT} using the generic deployable package on Red Hat Java Web Server,
ifdef::PAM[]
<<_sect_the_generic_deployable_bundle_installation>>
endif::PAM[]
ifdef::DM[]
<<_installing_the_standalone_package1>>
endif::DM[]
contains the instructions for starting the server. You can ignore the following discussion.
====

Once the {PRODUCT} server is installed on Red Hat JBoss EAP, you can run it either in the _standalone_ or the _domain_ mode.

[id='_starting_standalone']
=== Standalone Mode

NOTE: If you chose the deployable ZIP package for Red Hat JBoss EAP, the configuration steps are described in <<_downloading_the_standalone_package1>>.

The default startup script, `standalone.sh`, is optimized for performance. To run your server in the performance mode, do the following:

. On the command line, change to the `EAP_HOME/bin/` directory.
. In a Unix environment, run:
+
----
./standalone.sh
----
+
In a Windows environment, run:
+
----
./standalone.bat
----

[id='_starting_domain']
=== Domain Mode

If you used the JAR installer, 
ifdef::PAM[]
referenced in <<_sect_the_red_hat_jboss_bpm_suite_installer_installation>>,
endif::PAM[]
{PRODUCT} is already configured for running in the domain mode.

NOTE: If you chose the deployable ZIP package for Red Hat JBoss EAP, the configuration steps for domain mode are described in <<_downloading_the_standalone_package1>>.

To start {PRODUCT} in the domain mode, perform the following steps:

. On the command line, change to the `EAP_HOME/bin/` directory.
. In a Unix environment, run:
+
----
./domain.sh
----
+
In a Windows environment, run:
+
----
./domain.bat
----

[id='_security_manager']
== Enabling the Security Manager

{PRODUCT} ships with a standard security policy, located in the `kie.policy` file. The location of this file varies depending on your distribution. In order to use the Kie Policy for Java Security Manager, the application server must have its security manager activated. For Red Hat JBoss EAP 6.x or better, it is started using a valid `security.policy` file specified at `java.security.policy` and a valid `kie.policy` file specified at `kie.security.policy`.

This applies to all containers, even when using the rule and process engine in embedded mode. 

NOTE: If you installed {PRODUCT} using the installer, an option to apply the security policy is given to you at the time of installation. Applying the security policy using the installer will modify the `standalone.conf` file to  include the `security.policy` and `kie.policy` security policies in the `JBOSS_HOME/bin` folder. These policies will be enabled at runtime using `standalone.sh`.

[float]
=== Enabling Security Manager in Red Hat JBoss EAP 6

{PRODUCT} provides `standalone-secure.sh`, a separate script that is optimized for security. The script applies a security policy by default that protects against a known security vulnerability.

The `standalone-secure.sh` script is only available when using the Red Hat JBoss EAP Deployable package. 

[IMPORTANT]
====
It is recommended to use the `standalone-secure.sh` script in production environments.

The use of a security manager imposes a significant performance penalty that you should be aware of. The tradeoff between security and performance must be made by taking into consideration individual circumstances. See <<_java_security_manager_and_performance_management>>.
====

To run your server in the secure mode, do the following:

. On the command line, change to the `EAP_HOME_/bin/` directory.
. In a Unix environment, run:
+
----
./standalone-secure.sh
----
+
In a Windows environment, run:
+
----
./standalone-secure.bat
----


[float]
=== Enabling Security Manager in Red Hat JBoss EAP 7

If you are using Red Hat JBoss EAP in version 7, the `standalone-secure.sh` script is no longer available. To enable the security manager, start the server with the `-secmgr` and `-Dkie.security.policy=./kie.policy` flags. For example:

[source]
----
./standalone.sh -secmgr -Dkie.security.policy=./kie.policy
----

For further information about Java Security Manager in Red Hat JBoss EAP 7, see chapter https://access.redhat.com/documentation/en/red-hat-jboss-enterprise-application-platform/version-7.0/how-to-configure-server-security/#java_security_manager[Java Security Manager] of _Red Hat JBoss Enterprise Application Platform: How to Configure Server Security_.

[float]
=== Java Security Manager and Performance Management

As noted earlier, enabling the Java Security Manager (JSM) to sandbox the evaluation of MVEL scripts in {PRODUCT} introduces a performance hit in high load environments. Environments and performance markers must be kept in mind when deploying a {PRODUCT} application. Use the following guidelines to deploy secure and high performance {PRODUCT} applications.

* In high load environments where performance is critical it is recommended to only deploy applications that have been developed on other systems and properly reviewed. It is also recommended not to create any users with `analyst` role on such systems. If these safeguards are followed, it is safe to leave JSM disabled on these systems so it does not introduce any performance degradation.
* In testing and development environments without high loads, or in environments where rule and process authoring is exposed to external networks, it is recommended to have JSM enabled in order to achieve security benefits of properly sandboxed evaluation of MVEL.

Allowing users with `analyst` role to log in to the Business Central console with JSM disabled is not secure and not recommended.


[id='_logging_on']
== Logging into Business Central

Log into Business Central after the server has successfully started.

. Navigate to `http://localhost:8080/business-central` in a web browser. If the user interface has been configured to run from a domain name, substitute `localhost` for the domain name. For example `http://www.example.com:8080/business-central`.
. Log in with the user credentials that were created during installation. For example, user: `helloworlduser` and password: `Helloworld@123`.

[float]
==== Troubleshooting

_Loading..._ screen does not disappear::
When you log into Business Central, it is possible that the _Loading..._ screen does not disappear. This can be caused by your firewall interfering with Server Sent Events (SSE) used by Business Central.
+
To work around the problem, disable SSE usage by the Business Central:
+
. Create an `ErraiService.properties` file, which contains: `errai.bus.enable_sse_support=false`.
. Copy the file to `_INSTALL_PATH_/standalone/deployments/business-central.war/WEB-INF/classes/`.
. Redeploy `business-central.war`.
