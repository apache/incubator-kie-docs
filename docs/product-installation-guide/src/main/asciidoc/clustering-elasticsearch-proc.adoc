[id='clustering-elasticsearch-con]
= Setting up Elasticsearch 

Elasticsearch is a highly scalable open-source full-text search and analytics engine. It enables you to store, search, and analyze big volumes of data quickly and in near real time.  In a {PRODUCT} clustered environment, it enables you to perform complex and effiecent searches across nodes. Set up Elasticsearch on the main node of your cluster.s

.Prerequisites
* An NFS cluster
* Apache ActiveMQ Artemis installed on the main node of the cluster

.Procedure
. Download and unzip https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.6.5.zip[Elasticsearch].
. Replace content of the `elasticsearch/config/elasticsearch.yml` file as follows, MAIN_NODE_IP is the IP address of the main node of your cluster:
+
[source]
----
cluster.name: kie-cluster
transport.host: <MAIN_NODE_IP>
http.host: <MAIN_NODE_IP>
transport.tcp.port: 9300
xpack.security.enabled: false
discovery.zen.minimum_master_nodes: 1
----
. Add the following line to the `/etc/sysctl.conf` file:
+
[source]
----
vm.max_map_count=262144
fs.file-max=512000
fs.inotify.max_user_watches=524288
fs.inotify.max_user_instances=524288
----
. Run the following command:
+
[source]
----
$ sudo sysctl -p
----
. Add the following line to the `/etc/systemd/system.conf` file:
+
[source]
----
DefaultLimitNOFILE=2097152
----
. Restart the main node system.
. Install the following plugin:
+
[source]
----
$ ./bin/elasticsearch-plugin install x-pack
----
. Run Elasticsearch on the main node:
[source]
----
$ ./bin/elasticsearch
----