[id='guided_rules_THEN_proc']
= Adding THEN Actions in Guided Rules

The *THEN* part of the rule is the action to be performed when the *WHEN* condition of the rule has been met. For example, when a loan applicant is under 21 years old, the *THEN* action might set `approved` to `false`, declining the loan because the applicant is under age. You can set simple or complex actions to determine how and when your rules are applied.

.Prerequisite
All data objects required for your rules are listed in the *Data Objects* tab of the guided rule designer. See xref:guided-rules-create-proc[] for details.

.Procedure
. In the guided rule designer, click the plus icon (image:5686.png[]) on the right side of the `THEN` section.
+
The *Add a new action...* window with the available action elements opens.
+
.Add a new action to the rule
image::5695.png[Add a new action to the rule]
+
The list includes insertion and modification options based on the data objects in the *Data Objects* tab of the guided rule designer, and on any DSL objects defined for the package (if you selected *Use Domain Specific Language (DSL)* when you created this guided rule):

* *Change field values of:* Use this to set the value of fields on a fact (such as `LoanApplication`).
* *Delete:* Use this to delete a fact.
* *Modify:* Use this to specify fields to be modified for a fact.
* *Insert fact:* Use this to insert a fact and define resulting fields and values for the fact.
* *Logically Insert fact:* Use this to insert a fact logically into the inference engine and define resulting fields and values for the fact. The Red Hat Decision Manager inference engine is responsible for logical decisions on insertions and retractions of facts. After regular or stated insertions, facts have to be retracted explicitly. After logical insertions, facts are automatically retracted when the conditions that asserted the facts in the first place are no longer true.
* *Add free form DRL:* Use this to insert a free-form DRL field where you can define condition elements freely, without the guided rule designer.
* *Call method on:* Use this to invoke a method from another fact.
+
*<@Michael: Same template key question, for free form DRL in Actions.>*
+
////
.Template keys in free form DRL
[NOTE]
====
With free form DRL, you have the flexibility to add custom data types, such as template keys. Template keys are placeholder variables in your field constraints that are interpolated with a specified value when the DRL rules are generated. You can add a template key value to facts in the format `@key`. For example, `Person( age > @{age} )` creates an `$age` column in the decision table.
====
////
. Choose an action element (for example, *Modify*) and click *Ok*.
. Click the action element in the guided rule designer and use the *Add a field* window to select a field.
+
.Add a field
image::5696.png[Add a field]
+
Once you select a field, the window closes automatically.
. Click the edit icon (image:6191.png[]) to define the field value. The field value can be a literal value or a formula.
. Under the *THEN* section, click *(show options...)* and click the plus icon (image:5686.png[]) on the right side to set additional rule attributes, such as `ruleflow-group`, `salience`, and `date-expires`.
+
.Rule attributes
image::1141.png[Additional rule attributes]
