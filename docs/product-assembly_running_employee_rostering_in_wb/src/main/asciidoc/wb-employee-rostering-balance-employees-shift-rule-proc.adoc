[id='wb-employee-rostering-balance-employees-shift-rule-proc']
= Create the `BalanceEmployeesShiftNumber` guided rule 

The `BalanceEmployeesShiftNumber` guided rule creates a soft constraint that ensures all employees are assigned a shift, or that all employees are assigned an equal number of shifts.

.Procedure
. Go to *Menu* -> *Design* -> *Projects* and click the project name.
. Click *Create New Asset* -> *Guided Rule*.
. Enter `BalanceEmployeesShiftNumber` as the *Guided Rule* name and select the `employeerostering.employeerostering` *Package*. 
. Click *Ok* to create the rule asset.
. Add the *WHEN* condition by selecting `Employee` in the *Add a new action...* window. Click *+Ok*. 
. Click on the `Employee` condition to modify the constraints and add the variable name `$employee`.
. Add the *WHEN* condition `From Accumulate...`. 
.. Above the `From Accumulate...` condition, click *click to add pattern...* and select `Number` as the fact type from the drop down list.
.. Add the variable name `$shiftCount` to the `Number` condition.
.. Below the `From Accumulate...` condition, click *click to add pattern...* and select the `ShiftAssignment` fact type from the drop down list.
.. Add the variable name `$shiftAssignment` to the `ShiftAssignment` fact type.
.. Click on the `ShiftAssignment` condition again and from the *Add a restriction on a field* drop down list, select `employee`.
.. Select `equal to` from the drop down list next to the `employee` constraint.
.. Click the image:6191.png[edit] icon next to the drop down button to add a variable, and click *Bound variable* in the *Field value* window.
.. Select `$employee` from the drop down list.
.. In the *Function* box type `count($shiftAssignment)`.
. Add the *THEN* condition and select `Modify Soft Score` in the *Add a new action...* window. Click *+Ok*.
.. Type the following expression into the box: `-($shiftCount.intValue()*$shiftCount.intValue())`
. Click *Validate* in the upper right corner to check all rule conditions are valid.
. Click *Save* to save the rule.