[id='assembly_clustering-eap']

include::product-shared-docs/document-attributes.adoc[]

= Installing and configuring {PRODUCT} in a {EAP} 7.1 clustered environment
// Context attribute is assembly specific and enables module reuse between assemblies.
:imagesdir: topics/product-shared-docs/images
:context: assembly_clustering-eap
include::product-shared-docs/author-group.adoc[]

// Purpose statement for the assembly
As a system engineer, you can create a {PRODUCT} clustered environment to provide high availability and load balancing.

//.Prerequisites
//COMMENT: To be added.

include::product-installation-guide/clustering-con.adoc[leveloffset=+1]
include::product-installation-guide/clustering-elasticsearch-proc.adoc[leveloffset=+2]
include::product-installation-guide/clustering-artemis-activate-proc.adoc[leveloffset=+2]
== Clustering {CENTRAL}
include::product-installation-guide/clustering-dm-install-proc.adoc[leveloffset=+2]

== Clustering {KIE_SERVER}
include::product-installation-guide/clustering-kie-server-install-proc.adoc[leveloffset=+2]
=== Clustering the the standalone {KIE_SERVER} Controller (Optional)


.Prerequisites
* A {EAP} 7.1 NFS cluster is configured and Elasticsearch and AMQ Broker 7.1 are installed and running on one node of the cluster.
* {KIE_SERVER} is installed on each node of the cluster.

.Procedure
On each node of the cluster in the `pom.xml` file:

. Enable the {KIE_SERVER} watcher service system property:
+
[source]
----
org.kie.server.controller.templatefile.watcher.enabled=true
----
. In the `org.kie.server.router.repo` property, specify the path to the NFS storage where the memory configuration is stored:
+
[source]
----
org.kie.server.controller.templatefile><absolute_path_to_NFS_storage>
----

=== Clustering Smart Router (Optional)

.Prerequisites
* A {EAP} 7.1 NFS cluster is configured and Elasticsearch and AMQ Broker 7.1 are installed and running on one node of the cluster.
* {KIE_SERVER} is installed on each node of the cluster.

.Procedure
On each node of the cluster in the `pom.xml` file:

. Enable the {KIE_SERVER} watcher service system property:
+
[source]
----
org.kie.server.controller.templatefile.watcher.enabled=true
----
. In the `org.kie.server.router.repo` property, specify the path to the NFS storage where the memory configuration is stored:
+
[source]
----
org.kie.server.controller.templatefile><absolute_path_to_NFS_storage>
----

== Next steps
COMMENT: To be added


// Versioning info
include::product-shared-docs/versioning-information.adoc[]
