[[_chap_installation]]
= Installation

This section describes installation of {PRODUCT} on an already installed instance of Red Hat JBoss EAP 6.4 or later. If you use a different container, see the {PRODUCT}
{URL_INSTALLATION_GUIDE}[Installation Guide]. 

If you followed <<_chap_quick_start>>, you have already installed {PRODUCT} using the JAR installer. See <<_next_steps>> for further instructions.

NOTE: {PRODUCT} is designed to work with UTF-8 encoding. If your JVM uses a different encoding system, unexpected errors may occur. To ensure `UTF-8` is used by the JVM, use the following system property `"-Dfile.encoding=UTF-8"`.

[[_downloading_the_standalone_package1]]
== Downloading {PRODUCT} for Red Hat JBoss EAP

. Open the https://access.redhat.com/downloads/[DOWNLOADS] section of the Red Hat Customer Portal in your browser.
. In the *Product Downloads* page that opens, click 
ifdef::BRMS[*Red Hat JBoss BRMS*]
ifdef::BPMS[*Red Hat JBoss BPM Suite*]
and log in.
. From the *Version* drop-down menu, select version *{PRODUCT_VERSION}*.
. Select *{PRODUCT} {PRODUCT_VERSION}.0 Deployable for EAP 6* and click *Download*. If you use Red Hat JBoss EAP 7.0, select *{PRODUCT} {PRODUCT_VERSION}.0 Deployable for EAP 7*.

[[_installing_the_standalone_package1]]
== Installing {PRODUCT} on Red Hat JBoss Enterprise Application Platform

=== Installation on a New Red Hat JBoss EAP Instance

To install the deployable package for a Red Hat JBoss Enterprise Application Platform:

. Move the ZIP archive you downloaded in <<_downloading_the_standalone_package1>> to the _parent_ directory of the Red Hat JBoss Enterprise Application Platform home directory (referred to as `_EAP_HOME_`; the `jboss-eap-6.4` directory). 
. Unzip the downloaded ZIP archive and ensure it is merged into the `_EAP_HOME_` directory (`jboss-eap-6.4`).
+
[WARNING]
====
Perform this step with the same user account that was used to install Red Hat JBoss EAP. This account must _not_ be a superuser account.
====
. When prompted, overwrite the files that already exist in the `_EAP_HOME_` directory with with files from the downloaded ZIP archive.


=== Installation on an Existing Red Hat JBoss EAP Configuration

[WARNING]
====
These instructions are for installing, and _not_ for updating an existing Red Hat JBoss BRMS instance. Make sure that there is no existing Red Hat JBoss BRMS install in the target EAP.
====

To install the deployable package on a previously configured Red Hat JBoss EAP:

. Extract the ZIP package deployable for Red Hat JBoss EAP you downloaded in <<_downloading_the_standalone_package1>>.

. Unzip the downloaded ZIP archive; however, do not overwrite all of the files. Manually merge the following files into the `_EAP_HOME_` directory (`jboss-eap-6.4`):

* `jboss-eap-6.4/domain/configuration/*` Be aware that {PRODUCT} requires JMS, so JMS is added by default into all profiles in `domain.xml` provided by the {PRODUCT} distribution.
* `jboss-eap-6.4/standalone/configuration/*` Be aware that {PRODUCT} requires JMS, so JMS is added by default into all profiles configuration files, including `standalone.xml` and `standalone-ha.xml`, provided by the {PRODUCT} distribution.


+
[WARNING]
====
Make sure this step is performed by the same user account that was used to install EAP. This account must not be a superuser account.
====

. Copy the folder `jboss-eap-6.4/standalone/deployments` into the `_EAP_HOME_` directory from the {PRODUCT} distribution.
+
NOTE: If you already have deployments on your Red Hat JBoss EAP, ensure that your current deployments do not have colliding names with {PRODUCT} deployments.

[[_defining_roles]]
== Defining Roles

Before starting the server and logging into Business Central, you  need to create some user accounts. This section describes the different user roles that are used in {PRODUCT}:

* `admin`: The users with admin role are the administrators of the application. Administrators can manage users, manage the repositories (create and clone) and have full access to make the required changes in the application. Admins have access to all areas within the system.

ifdef::BPMS[]
* `developer`: A developer has access to almost all features and can manage rules, models, process flows, forms and dashboards. They can manage the asset repository, create, build, and deploy projects. They can also use Red Hat JBoss Developer Studio to view processes. Only administrative functions, such as creating and cloning a new repository, are hidden for the developer role.
endif::BPMS[]

* `analyst`: An analyst role has access to all features to model
ifdef::BPMS[]
and execute
endif::BPMS[]
projects. However, *Authoring* -> *Administration* access is unavailable to users with the analyst role. Certain lower-level features targeted towards developers, like the *Deployment* -> *Artifact Repository* view, are not accessible for this role. However, the *Build & Deploy* button is available for the analyst role while using the Project Editor.

ifdef::BPMS[]
* `user`: A user or a business user work on the business task lists that are used to operate a certain process. A user with this role can access the dashboard and manage processes.

* `manager`: A manager supervises the system and is interested in statistics around the business processes and their performance, business indicators, and other reporting of the system. A user with this role has access to the BAM only.
endif::BPMS[]

For further information about roles, see section {URL_ADMIN_GUIDE}#access_control2[Access Control] of the _{ADMIN_GUIDE}_. For further information about roles and task interactions, see section {URL_USER_GUIDE}#sect_user_task[User Task] of the _{USER_GUIDE}_.

Other roles you can encounter:

* REST API access control roles. For further information, see section {URL_DEVELOPMENT_GUIDE}#control_api[Control of REST API] of the _{DEVELOPMENT_GUIDE}_.
* The {KIE_SERVER} `kie-server` role. For further information, see chapter {URL_DEVELOPMENT_GUIDE}#chap_the_exec_server[Intelligent Process Server and Realtime Decision Server] of the _{DEVELOPMENT_GUIDE}_.
* The `kiemgmt` role for the managed repository feature. See section {URL_ADMIN_GUIDE}#managing_assets[Managing Assets] of the _{ADMIN_GUIDE}_.

NOTE: Enter the above mentioned roles during the user creation process.

[[_creating_the_users]]
== Creating Users

To start adding new users, you will need to run the `add-user.sh` script on a Unix system or the `add-user.bat` file on a Windows system from the EAP `bin` directory.

.Procedure: Creating New Users
. Change into the _EAP_HOME_ directory.
. On a Unix system, run the following command:
+
[source]
----
bin/add-user.sh
----
+
On a Windows system, run:
+
[source]
----
bin\add-user.bat
----
. Enter `b` to select the application user and press *Enter*.
. Accept the default realm (`ApplicationRealm`) by pressing *Enter*.
. At the user name prompt, enter the user name and confirm. For example: `helloworlduser`.
+
[IMPORTANT]
====
Make sure that the selected user name does _not_ conflict with any known title of a role or a group.

For example, if there is a role called `admin`, do _not_ create a user with the user name `admin`.
====

. Create the user password at the password prompt and reenter the password. For example: `Helloworld@123`.
+
[NOTE]
====
The password should be at least 8 characters in length and should contain upper and lower case alphabetic characters (A-Z, a-z), at least one numerical character (0-9) and at least one special character (for example ~ ! @ # $ % ^ * ( ) - _ + =).
====

. Enter a comma-separated list of roles the user will need at the roles prompt. For more information, see <<_defining_roles>>.
+
ifdef::BRMS[Note that Business Central users need to have the `analyst` or the `admin` role assigned.]
ifdef::BPMS[Note that Business Central users need to have the `analyst` or the `admin` role assigned,while the Dashboard Builder users need to have the `admin` role assigned.]

. Confirm that you want to add the user.
. Enter `yes` at the next prompt to enable clustering in the future.

[[_starting_the_server2]]
== Starting Server

You can start your server in one of two modes:

* Standalone, using the `standalone.sh` script.
* Standalone-secure, using the `standalone-secure.sh` script.

NOTE: If you are starting the server in the domain mode, the corresponding scripts are `domain.sh` and `domain-secure.sh` respectively.

The default starting script is `standalone.sh`. It is optimized for performance. To run your server in the performance mode:

. On the command line, change into the `_EAP_HOME_` directory:
. In a Unix environment run:
+
[source]
----
bin/standalone.sh
----
+
In a Windows environment run:
+
[source]
----
bin\standalone.bat
----

The `standalone-secure.sh` script is optimized for security. This script applies a security policy that protects you against a known security vulnerability.

NOTE: It is recommended that production environments use the `standalone-secure.sh` script.

WARNING: The use of a security manager imposes a significant performance penalty. Consideration your individual circumstances to decide which script to use. For further information, see <<_java_security_manager_and_performance_management>>.

To start your server in the secure mode:

. On the command line, move into the `_EAP_HOME_` directory.
. In a Unix environment run:
+
[source]
----
bin/standalone-secure.sh
----
+
In a Windows environment run:
+
[source]
----
bin\standalone-secure.bat
----

NOTE: If you installed {PRODUCT} using the JAR installer, you can choose to apply the security policy during the installation. The installer does not provide a separate `standalone-secure.sh` script.


[[_java_security_manager_and_performance_management]]
== Java Security Manager and Performance Management

Enabling the Java Security Manager (JSM) to sandbox the evaluation of MVEL scripts in {PRODUCT} causes a performance hit in high-load environments. When deploying a {PRODUCT} application, consider the performance needs in your environment. Use the following guidelines to deploy secure and high performance {PRODUCT} applications.

In high-load environments where performance is critical:

* Deploy applications that have been developed on other systems and properly reviewed. 
* Do not create any users with the `analyst` role on such systems. 

If these safeguards are followed, it is safe to leave JSM disabled on these systems so it does not introduce any performance degradation.

In testing and development environments without high loads, or in environments where rule and process authoring is exposed to external networks:

* Enable JSM in order to achieve security benefits of properly sandboxed evaluation of MVEL.
* Do not allow users with the `analyst` role to log in to the Business Central console with JSM disabled. This practice is _not_ secure and _not_ recommended.
