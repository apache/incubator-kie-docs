[id='automation-with-ansible-con']
= Automation with Ansible

Ansible provides an easy to implement automation mechanism for various physical as well as virtual network functions using protocols such as `netconf` or `cli`. As currently used in ONAP under APPC architecture, Ansible provides VNF management framework that allows an almost cli like set of tools in a structured form. It is agentless, which means that the target VNF need not have any additional software. This construct allows for management of any VNF in a consistent manner whether it supports a standard interface/protocols such as `netconf` or not. Any action (e.g configure, restart, health check etc) can be executed on the VNF by constructing a _playbook_ (or _set of playbooks_) that is executed by an Ansible on the VNF via SSH.

The Ansible Extension for APP-C allows management of VNFs via following architecture:

* *Ansible Directed Graph* (*DG*) - The Ansible Directed graph is generic directed graph that you can use to invoke any playbook via Ansible (and hence any APP-C action, since in Ansible, VNF actions map to playbooks) corresponding to a LCM action.
* *APP-C Ansible Adapter* - The ansible adapter is an OSGI bundle in the APP-C Karaf container that interacts with the Ansible Server. It is a set of REST calls that performs two actions, first, submit a request for a playbook to be executed, and second, if required get the results of the playbook after execution (if in synchronous mode).
* *APP-C/Ansible Server Interface* - Ansible libraries are written in Python and hence cannot be executed natively from within the APP-C Karaf container. Instead, the design calls for an *Ansible Server* that can execute the Ansible playbooks and exposes a *REST* interface that is compliant with requirements of APP-C. These requirements are documented as the Server API Interface that any compliant Ansible Server must support. Exact implementation of the Ansible Server is left open and does not affect APP-C operations as long as the server follows the interface. For purposes of evaluation, a reference web server that implements this APP-C/Ansible Server interface has been developed and the code is available from the App-C ONAP repository under `appc-adapters/appc-ansible-adapter/appc-ansible-example-server` path.

To envision the workflow when an application controller receives an event, refer to link:https://onap.readthedocs.io/en/amsterdam/submodules/appc/deployment.git/docs/APPC%20Ansible%20Adapter/APPC%20Ansible%20Adapter.html[APPC Ansible Adapter].
