[id='ba-karaf-xml-install-proc']
= Installing {PRODUCT} features on Karaf using XML files
Install {PRODUCT} features on Karaf to create a dynamic runtime environment for your {PRODUCT} processes.


.Prerequisites
* An Apache Karaf container in {FUSE_LONG} is avaiable. For information about installing {FUSE} in Apache Karaf, see https://access.redhat.com/documentation/en-us/red_hat_fuse/7.3/html/installing_on_apache_karaf/index[_Installing Red Hat Fuse on the Apache Karaf container_].
* You have removed any obsolete {PRODUCT} features XML files as described in xref:ba-karaf-xml-uninstall-proc[].

.Procedure
To install {PRODUCT} features, enter following command:

[source]
----
$ JBossFuse:karaf@root> feature:install <FEATURE_NAME>
----

In this command, `<FEATURE_NAME>` is one of the following features:

The following table provides examples of use cases for some of the features listed above.

.Features and use case examples
[cols="1,1", frame="all", options="header"]
|===
| Feature
| Description
ifdef::DM[]
|
|

|`drools-module`
| Contains the core and compiler of drools, used to create KieBases and KieSessions from plain DRL. It also contains the implementation of the executable model. Uses {PRODUCT} for rules evaluation, without requiring persistence, processes, or decision tables.

|`drools -template`
| Contains the drools templates.

|drools-jpa`
| Uses {PRODUCT} for rules evaluation with persistence and transactions, but without requiring processes or decision tables. The `drools-jpa` feature includes the ``drools-module``, however you might also need to install the `droolsjbpm-hibernate` feature, or ensure that a compatible hibernate bundle is installed.

|`drools-decisiontable`
| Uses {PRODUCT} with decision tables.
endif::[]
ifdef::PAM[]
|`jbpm`
| Uses {PRODUCT}. The `jbpm` feature includes the `drools-module` and ``drools-jpa``. You might need to install the `droolsjbpm-hibernate` feature, or ensure that a compatible hibernate bundle is installed.

|`jbpm` and `jbpm-human-task`
| Uses {PRODUCT} with human tasks.
endif::[]
|`droolsjbpm-hibernate`
|


|`jbpm-workitems-camel
| Provides the `jbpm-workitems-camel` component.

| core engine JARs and `kie-ci`
| Uses {PRODUCT} with `KieScanner` (`kie-ci`) to download kJARs from a Maven repository.

|`kie-camel`
|

|`kie-spring` and `kie-aries-blueprint`
| Uses KIE-Aries-Blueprint integration.

|``kie-kamel``
| Provides the `kie-kamel` component.

|===

Use `org.drools.osgi.spring.OsgiKModuleBeanFactoryPostProcessor` instead of `org.kie.spring.KModuleBeanFactoryPostProcessor` to postprocess KIE elements in an OSGi environment.

Do not install the `drools-module` feature before the `kie-spring` feature. Otherwise, the `drools-compiler` bundle does not detect packages exported by `kie-spring`.

If you installed the features in the incorrect order, run `osgi:refresh drools-compiler_bundle_ID`  to force the drools-compiler to rebuild its Import-Package metadata.
