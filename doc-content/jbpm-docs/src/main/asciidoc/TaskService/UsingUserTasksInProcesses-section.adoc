[[_usingusertasksinprocesses]]
= Using User Tasks in our Processes


jBPM supports the use of human tasks inside processes using a special User Task node defined by the BPMN2  Specification(as shown in the figure above). A User Task node represents an atomic task that needs to be  executed by a human actor.


image::TaskService/user-task.png[align="center"]


[Although jBPM has a special user task node for including human tasks inside a process, human tasks are considered  the same as any other kind of external service that needs to be invoked and are therefore simply implemented as a  domain-specific service.
See the chapter on domain-specific processes to learn more about this.]

A User Task node contains the following core properties:

* Actors: The actors that are responsible for executing the human task. A list of actor id's can be specified using a comma (',') as separator.
* Group: The group id that is responsible for executing the human task. A list of group id's can be specified using a comma (',') as separator.
* Name: The display name of the node.
* TaskName: The name of the human task. This name is used to link the task to a Form. It also represent the internal name of the Task that can be used for other purposes.
* DataInputSet: all the input variables that the task will receive to work on. Usually you will be interested in copying  variables from the scope of the process to the scope of the task. (Look at the data mappings section for an example)
* DataOutputSet: all the output variables that will be generated by the execution of the task. Here you specify all the  name of the variables in the context of the task that you are interested to copy to the context of the process. (Look at the data mappings section for an example)
* Assignments: here you specify which process variable will be linked to each Data Input and Data Output mapping. (Look at the data mappings section for an example)


You can edit these variables in the properties view (see below) when selecting the User Task node.


image::TaskService/properties-panel.png[align="center"]


A User Task node also contains the following extra properties:

* Comment: A comment associated with the human task. Here you can use expressions.
* Content: The data associated with this task.
* Priority: An integer indicating the priority of the human task.
* Skippable: Specifies whether the human task can be skipped, i.e., whether the actor may  decide not to execute the task.
* On entry and on exit actions: Action scripts that are executed upon entry and exit of this node, respectively.



image::TaskService/properties-panel-extra.png[align="center"]


== Swimlanes


User tasks can be used in combination with swimlanes to assign multiple human tasks to the same actor.
Whenever the first task in a swimlane is created, and that task has an actorId specified, that actorId will be assigned to (all other tasks of) that swimlane as well.
Note that this would override the actorId of subsequent tasks in that swimlane (if specified), so only the actorId of the first human task in a swimlane will be taken into account, all others will then take the actorId as assigned in the first one.

[WARNING]
====
ActorId assignment will work only when there is single actor specified.
Since ActorId field can contain multiple actors (john,mary,peter) auto assignment for the first task will not be performed when multiple values are found.
====

Whenever a human task that is part of a swimlane is completed, the actorId of that swimlane is set to the actorId that executed that human task.
This allows for example to assign a human task to a group of users, and to assign future tasks of that swimlame to the user that claimed the first task.
This will also automatically change the assignment of tasks if at some point one of the tasks is reassigned to another user.

Also exists the possibility to disable the autoclaim functionality of the swimlanes. In such case, the swimlane works like a visual element to group tasks in the process diagram, but the task which belong to any swimlane won't be assigned automatically. The Autoclaim functionality is set to `true` by default. If you require the property `Autoclaim` set to `false` by default, set the following runtime environment entry in your deployment descriptor on a global or a project level:

* Name: `Autoclaim`
* Value: `"false"`

For example, if you want to set the entry in the XML deployment descriptor on the project level, add the following to the `kie-deployment-descriptor.xml` file:

[source,xml]
----
<environment-entries>
  ..
    <environment-entry>
        <resolver>mvel</resolver>
        <identifier>new String ("false")</identifier>
        <parameters/>
        <name>Autoclaim</name>
    </environment-entry>
  ..
</environment-entries>
----

If you are setting the runtime environment property using the API, note that the value is a String, not a Boolean type.

For more information about deployment descriptors, see <<_deployment_descriptors>>.
