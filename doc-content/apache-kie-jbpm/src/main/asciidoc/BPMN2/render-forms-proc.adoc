[id='render-forms']

= Rendering forms for external use
Forms generated by the Form Builder can be reused in other client applications with the help of the REST API and a JavaScript library. The REST API defines the end points for the external client applications to call and the JavaScript library makes it easy to interact with these endpoints and to render these forms.

To use this API you will need to integrate the Forms REST JavaScript library in your client application. The details of the library and the methods that it provides are given in the following section, along with a simple example.

The JavaScript API for Form Reuse makes it easy to use forms created in one Business Central application to be used in remote applications and allows loading of these forms from different Business Central instances, submitting them, launching processes or task instances, and executing callback functions when the actions are completed.

== Blueprint for using the JavaScript Library
A simple example of using this API would involve the following steps:

. Integrate the JavaScript library in the codebase for the external client application so that its functions are available.
. Create a new instance of the [class]``jBPMFormsAPI`` class in your own JavaScript code. This is the starting point for all interactions with this library.
+
[source]
----
var jbpmRestAPI = new jBPMFormsAPI();
----
. Call your desired methods on this instance. For example, if you want to show a form, you would use the following method:
+
[source]
----
jbpmRestAPI.showStartProcessForm(hostUrl, deploymentId, processId, divId, onsuccess, onerror);
----
and provide the relevant details (hostUrl, deploymentId, processId and so on. A full list of the methods and parameters follows after this section).
. Do post processing with the optional [parameter]``onsuccess`` and [parameter]``onerror`` methods.
. Work with the form, starting processes ([method]``startProcess()``), claiming tasks ([method]``claimTask()``) starting tasks ([method]``startTask()``) or completing tasks ([method]``completeTask``). Full list of available methods follows after this section.
. Once you're finished with the form, clear the container that displayed it using [method]``clearContainer()`` method.

== Full list of available methods in the JavaScript Library
The JavaScript library is pretty comprehensive and provides several methods to render and process forms.

. `showStartProcessForm(hostUrl, deploymentId, processId, divId, onsuccessCallback, onerrorCallback):` Makes a call to the REST endpoint to obtain the form URL. If it receives a valid response, it embeds the process start form in the stated div. You need these parameters:
* ``hostURL``: The URL of the Business Central instance that holds the deployments.
* ``deploymentId``: The deployment identifier that contains the process to run.
* ``processId``: The identifier of the process to run.
* ``divId``: The identifier of the div that has to contain the form.
* `onsuccessCallback` (optional): A JavaScript function executed if the form is going to be rendered. This function will receive the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to render the form. This function will receive the server response as a parameter.
. `startProcess(divId, onsuccessCallback, onerrorCallback):` Submits the form loaded on the stated div and starts the process. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
* ``onsuccessCallback``(optional): A JavaScript function executed after the process is started. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to start the process. This function receives the server response as a parameter.
. `showTaskForm(hostUrl, taskId, divId, onsuccessCallback, onerrorCallback):` Makes a call to the REST endpoint to obtain the form URL. If it receives a valid response, it embeds the task form in the stated div. You need these parameters:
* ``hostURL``: The URL of the Business Central instance that holds the deployments.
* ``taskId``: The identifier of the task to show the form.
* ``divId``: The identifier of the div that has to contain the form.
* `onsuccessCallback` (optional): A JavaScript function executed if the form is going to be rendered. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to render the form. This function receives the server response as a parameter.
. `claimTask(divId, onsuccessCallback, onerrorCallback):` Claims the task whose form is being rendered. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
* `onsuccessCallback` (optional): A JavaScript function executed after the task is claimed. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to claim the task. This function receives the server response as a parameter.
. `startTask(divId, onsuccessCallback, onerrorCallback):` Starts the task whose form is being rendered. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
* `onsuccessCallback` (optional): A JavaScript function executed after the task is claimed. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to claim the task. This function receives the server response as a parameter.
. `releaseTask(divId, onsuccessCallback, onerrorCallback):` Releases the task whose form is being rendered. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
* `onsuccessCallback` (optional): A JavaScript function executed after the task is claimed. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to claim the task. This function receives the server response as a parameter.
. `saveTask(divId, onsuccessCallback, onerrorCallback):` Submits the form and saves the state of the task whose form is being rendered. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
* `onsuccessCallback` (optional): A JavaScript function executed after the task is claimed. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to claim the task. This function receives the server response as a parameter.
. `completeTask(divId, onsuccessCallback, onerrorCallback):` Submits the form and completes task whose form is being rendered. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
* `onsuccessCallback` (optional): A JavaScript function executed after the task is claimed. This function receives the server response as a parameter.
* `onerrorCallback` (optional): A JavaScript function executed if any error occurs and it is impossible to claim the task. This function receives the server response as a parameter.
. `clearContainer(divId):` Cleans the div content and the related data stored on the component. You need these parameters:
* ``divId``: The identifier of the div that contains the form.
