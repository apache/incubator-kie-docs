[id='proc-kogito-travel-agency-create-services_{context}']

= Creating the travel agency service definitions using the {PRODUCT} CLI

After you set up the required infrastructures for your travel agency application, you can create the travel agency service definitions and provision the OpenShift resources required for deployment with the binary build used in this example. You can create the service definitions using the OpenShift web console or using the {PRODUCT} CLI.

This example uses the {PRODUCT} CLI to create the service definitions and the {PRODUCT} Operator page in the web console to verify that the services are created.

The travel agency example application includes the following key OpenShift resources:

* `BuildConfig`: Configures the application to support a binary build in addition to a traditional OpenShift build for deployment. In a binary build, you build the application locally and push the built application to the OpenShift build to be packaged into the runtime container image. A binary build enables services to be deployed faster than a traditional OpenShift build and deployment.
* `ImageStream`: Defines the set of container images identified by tags.
* `DeploymentConfig`: Describes the desired state of the application as a pod template.
* `Service`: Functions as a Kubernetes-internal load balancer to serve the application pods.
* `Route`: Exposes the `Service` at a host name.

.Procedure
. In a command terminal, navigate to the `kogito-travel-agency` example application and enter the following commands to create {PRODUCT} service definitions for the `travels` and `visas` services:
+
--
.Creating the travels service
[source]
----
$ kogito deploy-service travels --enable-persistence --enable-events
----

.Creating the visas service
[source]
----
$ kogito deploy-service visas --enable-persistence --enable-events
----

When the deployment configuration of this service is generated, the {PRODUCT} Operator automatically configures the environment variables to point to the location of the Kafka and Infinispan environments that you deployed previously. For Kafka messaging, the operator sets the incoming and outgoing messaging channels and properties as needed. For Infinispan persistence, the operator sets the authorization configuration based on the credentials generated by the Infinispan Operator.

NOTE: You can also provide a Git repository location to create your services remotely instead of creating your services from a local source. However, this example uses local applications to demonstrate how to prepare the {PRODUCT} project on a development machine for a direct push to the cloud.

--
. In the OpenShift web console, use the left menu to navigate to *Operators* -> *Installed Operators* -> *{PRODUCT}* -> *{PRODUCT} Service* and verify the new `travels` and `visas` services:
+
--
.New travel agency and visas services listed
image::kogito/openshift/kogito-ocp-create-app-listed-agency.png[Image of travels and visas services listed in web console]

The new services are available but not yet deployed on OpenShift until you build and deploy the service projects from source using a binary build.
--
