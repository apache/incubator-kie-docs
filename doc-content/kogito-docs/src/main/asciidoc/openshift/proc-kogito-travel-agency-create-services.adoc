[id='proc-kogito-travel-agency-create-services_{context}']
= Creating {PRODUCT} service definitions on OpenShift using the {PRODUCT} CLI

After you set up the required infrastructures for your application, you can create the {PRODUCT} service definitions and provision the OpenShift resources required for deployment with a binary build. You can create the service definitions using the OpenShift web console or using the {PRODUCT} CLI.

This example uses the {PRODUCT} CLI to create the service definitions for the https://github.com/kiegroup/kogito-examples/tree/stable/kogito-travel-agency/extended[`kogito-travel-agency`] extended example application and uses the {PRODUCT} Operator page in the web console to verify that the services are created.

The travel agency example application includes the following key OpenShift resources:

* `BuildConfig`: Configures the application to support a binary build in addition to a traditional OpenShift build for deployment. In a binary build, you build the application locally and push the built application to the OpenShift build to be packaged into the runtime container image. A binary build enables services to be deployed faster than a traditional OpenShift build and deployment.
* `ImageStream`: Defines the set of container images identified by tags.
* `Deployments`: Describes the desired state of the application as a pod template.
* `Service`: Functions as a Kubernetes-internal load balancer to serve the application pods.
* `Route`: Exposes the `Service` at a host name.

.Prerequisites
* You have installed the following Infinispan persistence and Kafka messaging infrastructure components for your {PRODUCT} services, and you have installed the {PRODUCT} Data Index Service accordingly, as shown in the following example commands:
+
.Installing Infinispan, Kafka, and Data Index Service components
[source]
----
$ kogito install infra kogito-infinispan-infra --kind Infinispan --apiVersion infinispan.org/v1
$ kogito install infra kogito-kafka-infra --kind Kafka --apiVersion kafka.strimzi.io/v1beta1
$ kogito install data-index --infra kogito-infinispan-infra --infra kogito-kafka-infra
----

.Procedure
. In a command terminal, navigate to the `kogito-travel-agency` extended example application and enter the following commands to create {PRODUCT} service definitions for the `travels` and `visas` services with Infinispan persistence and Kafka messaging enabled:
+
--
.Creating the travels service with persistence and messaging enabled
[source]
----
$ kogito deploy-service travels --infra kogito-infinispan-infra --infra kogito-kafka-infra
----

.Creating the visas service with persistence and messaging enabled
[source]
----
$ kogito deploy-service visas --infra kogito-infinispan-infra --infra kogito-kafka-infra
----

When the deployment configuration of this service is generated, the {PRODUCT} Operator automatically configures the environment variables to point to the location of the Kafka and Infinispan environments that you deployed previously. For Kafka messaging, the operator sets the incoming and outgoing messaging channels and properties as needed. For Infinispan persistence, the operator sets the authorization configuration based on the credentials generated by the Infinispan Operator.

NOTE: You can also provide a Git repository location to create your services remotely instead of creating your services from a local source. However, this example uses local applications to demonstrate how to prepare the {PRODUCT} project on a development machine for a direct push to the cloud.

--
. In the OpenShift web console, use the left menu to navigate to *Operators* -> *Installed Operators* -> *{PRODUCT}* -> *{PRODUCT} Service* and verify the new `travels` and `visas` services:
+
--
.New travel agency and visas services listed
image::kogito/openshift/kogito-ocp-create-app-listed-agency.png[Image of travels and visas services listed in web console]

The new services are available but not yet deployed on OpenShift until you build and deploy the service projects from source using a binary build.
--
