[id='con-kogito-operator-with-trusty-service_{context}']
= {PRODUCT} Operator interaction with the {PRODUCT} Trusty Service

{PRODUCT} provides a Trusty Service that stores all {PRODUCT} tracing events related to decisions made in {PRODUCT} services. The Trusty Service uses Apache Kafka messaging to consume https://cloudevents.io/[CloudEvents] messages from {PRODUCT} services, and then processes the tracing events and stores the data in the Infinispan persistence store.

You can use the following {PRODUCT} command-line interface (CLI) operation to install the {PRODUCT} Trusty Service for auditing purposes in {PRODUCT} services:

.Enable Trusty Service
[source,subs="attributes+,+quotes"]
----
$ {PRODUCT_INIT} install trusty --infra __INFINISPAN_INFRA_NAME__ --infra __KAFKA_INFRA_NAME__ -p __PROJECT_NAME__
----

To export tracing events from your {PRODUCT} project, you must additionally add the `tracing-addon` add-on as a dependency to your project.

When you enable the Trusty Service for your {PRODUCT} project, the {PRODUCT} Operator creates a `KogitoTrusty` custom resource to handle the Trusty Service deployment for you. This resource is added to your {PRODUCT} project and in the {PRODUCT} Operator page of the *Installed Operators* listed in the OpenShift web console, if applicable.

The {PRODUCT} Operator uses the https://github.com/infinispan/infinispan-operator[Infinispan Operator] for persistence infrastructure and the https://strimzi.io/docs/latest/[Strimzi Operator] for Kafka messaging infrastructure.

If an Infinispan Server instance and an Apache Kafka cluster are not installed in the OpenShift namespace, you must configure these infrastructure components before installing the Trusty Service:

.Enable Infinispan persistence
[source,subs="attributes+,+quotes"]
----
$ {PRODUCT_INIT} install infra __INFINISPAN_INFRA_NAME__ --kind Infinispan --apiVersion infinispan.org/v1 -p __PROJECT_NAME__
----

.Enable Kafka messaging
[source,subs="attributes+,+quotes"]
----
$ {PRODUCT_INIT} install infra __KAFKA_INFRA_NAME__ --kind Kafka --apiVersion kafka.strimzi.io/v1beta1 -p __PROJECT_NAME__
----

If the {PRODUCT} Explainability Service is enabled, then the Trusty Service also stores the explainability results for all the tracing events.

.Additional resources
ifdef::KOGITO[]
* {URL_CONFIGURING_KOGITO}#con-trusty-service_kogito-configuring[{PRODUCT} Trusty Service and Explainability Service]
endif::[]
ifdef::KOGITO-COMM[]
* xref:con-trusty-service_kogito-configuring[]
endif::[]
