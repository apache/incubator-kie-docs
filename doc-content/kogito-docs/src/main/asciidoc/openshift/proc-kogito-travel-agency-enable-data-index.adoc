[id='proc-kogito-travel-agency-enable-data-index_{context}']

= Enabling the {PRODUCT} Data Index Service for {PRODUCT} services

{PRODUCT} provides a Data Index Service that stores all {PRODUCT} events related to processes, tasks, and domain data. The Data Index Service uses Kafka messaging to consume https://cloudevents.io/[CloudEvents] messages from {PRODUCT} services, and then indexes the returned data for future GraphQL queries and stores the data in the Infinispan persistence store. The Data Index Service is at the core of all {PRODUCT} search, insight, and management capabilities.

The {PRODUCT} Operator uses the Data Index Service for data management in a {PRODUCT} project. For optimal {PRODUCT} deployment on OpenShift, enable the Data Index Service for your {PRODUCT} services. You can install the Data Index Service using the {PRODUCT} Operator page in the OpenShift web console or using the {PRODUCT} CLI.

This example uses the {PRODUCT} CLI to install the Data Index Service and the {PRODUCT} Operator page in the web console to verify that the service is enabled.

.Procedure
. In a command terminal, enter the following command to install the {PRODUCT} Data Index Service for the {PRODUCT} services:
+
--
.Installing Data Index Service
[source]
----
kogito install data-index
----

When you enter this command, the {PRODUCT} Operator verifies that the required Infinispan and Kafka infrastructures exist and provisions the Data Index Service to connect to your existing infrastructures. If the infrastructures do not exist, the {PRODUCT} Operator automatically deploys new infrastructures and connects to them.

NOTE: Due to this automated infrastructure setup with the Data Index Service, you do not need to explicitly create Infinispan and Kafka infrastructures for every deployment. However, for the first {PRODUCT} services that you deploy, consider creating your infrastructures manually to better understand {PRODUCT} deployment features.

--
. In the OpenShift web console, use the left menu to navigate to the following windows to verify the installed Data Index Service:

* *Operators* -> *Installed Operators* -> *{PRODUCT}* -> *{PRODUCT} Data Index*: A new `kogito-data-index` custom resource is listed.
+
.Data Index Service resource
image::kogito/openshift/kogito-ocp-data-index.png[Image of Kogito Data Index page in web console]
* *Workloads* -> *Deployments*: A new `kogito-data-index` deployment is listed.
+
.Data Index Service deployment
image::kogito/openshift/kogito-ocp-data-index-deployment.png[Image of Data Index deployment page in web console]
* *Networking* -> *Routes*: A new `kogito-data-index` route is listed.
+
--
.Data Index Service route
image::kogito/openshift/kogito-ocp-data-index-route.png[Image of Data Index route page in web console]

You can click the *Location* URL to view the {PRODUCT} Data Index Service GraphQL interface (GraphiQL) and enter GraphQL queries for stored data.

.Example GraphQL query in GraphiQL interface for Data Index Service
image::kogito/openshift/kogito-ocp-data-index-graphql2.png[Image of Data Index GraphiQL interface]
--
