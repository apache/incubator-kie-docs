[id='chap-kogito-developing-decision-services']
= Developing decision services with {PRODUCT}
:context: kogito-developing-decision-services

// Purpose statement for the assembly
As a developer of business decisions, you can use {PRODUCT} business automation to develop decision services using Decision Model and Notation (DMN) models, Drools Rule Language (DRL) rules, XLS or XLSX spreadsheet decision tables, or a combination of all three methods.

// Modules - concepts, procedures, refs, etc.

include::decision-authoring-general/ref-decision-authoring-assets.adoc[leveloffset=+1]
include::creating-running/ref-kogito-app-examples.adoc[leveloffset=+1]

= Using DMN models in {PRODUCT} services
:context: dmn-models

As a developer of business decisions, you can use Decision Model and Notation (DMN) to model a decision service graphically. The decision requirements of a DMN decision model are determined by a decision requirements graph (DRG) that is depicted in one or more decision requirements diagrams (DRDs). A DRD can represent part or all of the overall DRG for the DMN model. DRDs trace business decisions from start to finish, with each decision node using logic defined in DMN boxed expressions such as decision tables.

{PRODUCT} provides design and runtime support for DMN 1.2 models at conformance level 3, and runtime-only support for DMN 1.1 and 1.3 models at conformance level 3. You can design your DMN models with the {PRODUCT} DMN modeler in VSCode or import existing DMN models into your {PRODUCT} projects for deployment and execution. DMN 1.1 and 1.3 models are currently not supported in the {PRODUCT} DMN modeler.

For more information about DMN, see the Object Management Group (OMG) https://www.omg.org/spec/DMN[Decision Model and Notation specification].

include::dmn/con-dmn.adoc[leveloffset=+1]
include::dmn/con-dmn-conformance-levels.adoc[leveloffset=+2]
include::dmn/ref-dmn-drd-components.adoc[leveloffset=+2]
include::dmn/con-dmn-feel.adoc[leveloffset=+2]
include::dmn/ref-dmn-feel-data-types.adoc[leveloffset=+3]
include::dmn/ref-dmn-feel-builtin-functions.adoc[leveloffset=+3]
include::dmn/ref-dmn-feel-variable-function-names.adoc[leveloffset=+3]include::dmn/con-dmn-boxed-expressions.adoc[leveloffset=+2]
include::dmn/con-dmn-decision-tables.adoc[leveloffset=+3]
include::dmn/con-dmn-decision-tables-hit-policies.adoc[leveloffset=+4]
include::dmn/con-dmn-literal-expressions.adoc[leveloffset=+3]
include::dmn/con-dmn-context-expressions.adoc[leveloffset=+3]
include::dmn/con-dmn-relation-expressions.adoc[leveloffset=+3]
include::dmn/con-dmn-function-expressions.adoc[leveloffset=+3]
include::dmn/con-dmn-invocation-expressions.adoc[leveloffset=+3]
include::dmn/con-dmn-list-expressions.adoc[leveloffset=+3]
include::dmn/ref-dmn-model-example.adoc[leveloffset=+2]
include::dmn/con-dmn-support.adoc[leveloffset=+1]
//@comment: Under investigation for Kogito. (Stetson, 5 March 2020)
//include::dmn/ref-dmn-properties.adoc[leveloffset=+2]
include::dmn/con-dmn-validation.adoc[leveloffset=+2]
ifdef::KOGITO-COMM[]
include::dmn/ref-dmn-feel-enhancements.adoc[leveloffset=+2]
include::dmn/ref-dmn-model-enhancements.adoc[leveloffset=+2]
endif::[]
include::dmn/proc-dmn-model-creating.adoc[leveloffset=+1]
include::dmn/proc-dmn-logic-defining.adoc[leveloffset=+2]
include::dmn/proc-dmn-data-types-defining.adoc[leveloffset=+2]
include::dmn/con-dmn-included-models.adoc[leveloffset=+2]
include::dmn/proc-dmn-included-models-dmn.adoc[leveloffset=+3]
include::dmn/proc-dmn-included-models-pmml.adoc[leveloffset=+3]
include::dmn/proc-dmn-model-creating-multiples.adoc[leveloffset=+2]
include::dmn/con-dmn-documentation.adoc[leveloffset=+2]
include::dmn/ref-dmn-designer-nav.adoc[leveloffset=+2]
//@comment: Not yet applicable for Kogito. (Stetson, 5 March 2020)
//include::dmn/con-dmn-execution.adoc[leveloffset=+1]
//include::dmn/proc-dmn-execution-embedded.adoc[leveloffset=+2]
//include::dmn/proc-dmn-execution-remote-java.adoc[leveloffset=+2]
//include::dmn/proc-dmn-execution-rest.adoc[leveloffset=+2]
include::creating-running/con-kogito-service-execution.adoc[leveloffset=+1]
include::dmn/con-audit-console.adoc[leveloffset=+1]
include::dmn/proc-audit-console-usage.adoc[leveloffset=+2]

= Using DRL rules in {PRODUCT} services
:context: drl-rules

As a developer of business decisions, you can define business rules using Drools Rule Language (DRL) directly in free-form `.drl` text files. A DRL file can contain one or more rules that define at a minimum the rule conditions (`when`) and actions (`then`).

include::drl/con-drl.adoc[leveloffset=+1]
include::drl/con-drl-packages.adoc[leveloffset=+2]
include::drl/con-drl-rule-units.adoc[leveloffset=+2]
include::drl/con-drl-imports.adoc[leveloffset=+2]
include::drl/con-drl-declarations.adoc[leveloffset=+2]
include::drl/con-drl-declarations-without-metadata.adoc[leveloffset=+3]
include::drl/con-drl-declarations-enumerative.adoc[leveloffset=+3]
include::drl/con-drl-declarations-extended.adoc[leveloffset=+3]
include::drl/con-drl-declarations-with-metadata.adoc[leveloffset=+3]
include::drl/ref-drl-declarations-metadata-tags.adoc[leveloffset=+3]
include::drl/con-drl-queries.adoc[leveloffset=+2]
include::decision-engine/con-property-change-listeners.adoc[leveloffset=+3]
//@comment: Needs update for Kogito, but even then is legacy. Leaving for now until decided. (Stetson 6 Apr 2020)
//include::drl/con-drl-globals.adoc[leveloffset=+2]
include::drl/ref-rules-attributes.adoc[leveloffset=+2]
//@comment: Undecided for Kogito at this time. (Stetson 6 Apr 2020)
//include::drl/con-drl-timers-calendars.adoc[leveloffset=+3]
include::drl/con-drl-rules-conditions.adoc[leveloffset=+2]
include::drl/ref-drl-operators.adoc[leveloffset=+3]
include::drl/ref-drl-operator-precedence.adoc[leveloffset=+3]
include::drl/ref-drl-rules-conditions-elements.adoc[leveloffset=+3]
ifdef::KOGITO-COMM[]
include::drl/ref-drl-rules-conditions-elements-diagrams.adoc[leveloffset=+3]
endif::[]
include::drl/con-drl-rules-actions.adoc[leveloffset=+2]
include::drl/con-drl-rules-comments.adoc[leveloffset=+2]
include::drl/ref-drl-rules-errors.adoc[leveloffset=+2]
include::drl/con-drl-legacy.adoc[leveloffset=+2]
include::drl/proc-drl-rules-create.adoc[leveloffset=+1]
include::creating-running/con-kogito-service-execution.adoc[leveloffset=+1]

= Using spreadsheet decision tables in {PRODUCT} services
:context: decision-tables

As a developer of business decisions, you can define business rules in a tabular format in spreadsheet decision tables and then include the spreadsheet file in your {PRODUCT} project. These rules are compiled into Drools Rule Language (DRL) for the decision service in your project.

include::decision-tables/con-decision-tables.adoc[leveloffset=+1]
include::decision-tables/con-decision-tables-use-case.adoc[leveloffset=+1]
include::decision-tables/proc-decision-tables-creating.adoc[leveloffset=+1]
include::decision-tables/ref-decision-tables-rule-set-entries.adoc[leveloffset=+2]
include::decision-tables/ref-decision-tables-rule-table-entries.adoc[leveloffset=+2]
include::decision-tables/ref-decision-tables-attributes.adoc[leveloffset=+2]
include::creating-running/con-kogito-service-execution.adoc[leveloffset=+1]

= Testing decision services using test scenarios in {PRODUCT}
:context: test-scenarios

As a developer of business decisions, you can use test scenarios in {PRODUCT} to test the decision logic in your {PRODUCT} decision services. Test scenarios enable you to ensure that your {PRODUCT} decision services are functioning properly and as expected as you develop your {PRODUCT} project.

IMPORTANT: Test scenarios in {PRODUCT} currently support DMN decision services only. Test scenarios will support Drools Rule Language (DRL) decision services in a future release.

include::test-scenarios/con-test-scenarios.adoc[leveloffset=+1]
include::test-scenarios/proc-test-scenarios-creating.adoc[leveloffset=+1]
//@comment: Excluding the list value topic until related PR is merged post 0.4.2. (Stetson 8 May 2020)
//include::test-scenarios/proc-test-scenarios-collections.adoc[leveloffset=+2]
include::test-scenarios/ref-test-scenarios-supported-feel-data-types.adoc[leveloffset=+2]

= {DECISION_ENGINE_CAP} in {PRODUCT}
:context: decision-engine

As a developer of business decisions, your understanding of the {DECISION_ENGINE} in {PRODUCT} can help you design more effective business assets and a more scalable decision management architecture. The {DECISION_ENGINE} is the {PRODUCT} component that stores, processes, and evaluates data to execute business rules and to reach the decisions that you define. This document describes basic concepts and functions of the {DECISION_ENGINE} to consider as you create your business rule system and decision services in {PRODUCT}.

include::decision-engine/con-decision-engine.adoc[leveloffset=+1]
////
//Excluded for now, not applicable to Kogito, no replacement yet. (Stetson, 9 Mar 2020)
include::decision-engine/kie-sessions-con.adoc[leveloffset=+1]
include::decision-engine/kie-sessions-stateless-con.adoc[leveloffset=+2]
include::decision-engine/kie-sessions-stateless-globals-con.adoc[leveloffset=+3]
include::decision-engine/kie-sessions-stateful-con.adoc[leveloffset=+2]
include::decision-engine/kie-sessions-pools-con.adoc[leveloffset=+2]
////
//@comment evacchi not totally sure how to make it "flow" with OOPath @MarkP ?
//include::decision-engine/con-inference-and-truth-maintenance.adoc[leveloffset=+1]
//@comment evacchi equality mode currently defaults to identity and there is really no real way to override. So I'd just leave this out for now
//include::decision-engine/con-fact-equality-modes.adoc[leveloffset=+2]
include::decision-engine/con-execution-control.adoc[leveloffset=+1]
//@comment Currently TBD for Kogito. (Stetson 7 Apr 2020)
//include::decision-engine/con-rule-execution-modes.adoc[leveloffset=+2]
//include::decision-engine/con-fact-propagation-modes.adoc[leveloffset=+2]
//include::decision-engine/con-agenda-filters.adoc[leveloffset=+2]
//@comment Rule units seem no longer portrayed for execution control but for general strategy. Will see. (Stetson 7 Apr 2020)
//include::drl/con-drl-rule-units.adoc[leveloffset=+2]
include::decision-engine/con-phreak-algorithm.adoc[leveloffset=+1]
include::decision-engine/con-phreak-rule-evaluation.adoc[leveloffset=+2]
include::decision-engine/con-forward-and-backward-chaining.adoc[leveloffset=+3]
//@comment Currently TBD for Kogito (Stetson 7 Apr 2020)
//include::decision-engine/con-rule-base-configuration.adoc[leveloffset=+2]
//include::decision-engine/con-phreak-sequential-mode.adoc[leveloffset=+2]
include::decision-engine/con-property-change-listeners.adoc[leveloffset=+2]
////
//Excluded for now, not yet supported in Kogito. (9 Mar 2020)
include::decision-engine/cep-con.adoc[leveloffset=+1]
include::decision-engine/cep-events-con.adoc[leveloffset=+2]
include::decision-engine/cep-events-proc.adoc[leveloffset=+2]
include::drl/ref-drl-declarations-metadata-tags.adoc[leveloffset=+2]
include::decision-engine/cep-modes-con.adoc[leveloffset=+2]
include::decision-engine/cep-negative-patterns.adoc[leveloffset=+3]
include::decision-engine/cep-temporal-operators.adoc[leveloffset=+2]
include::decision-engine/cep-clock-ref.adoc[leveloffset=+2]
include::decision-engine/cep-event-streams-con.adoc[leveloffset=+2]
include::decision-engine/cep-event-streams-proc.adoc[leveloffset=+3]
include::decision-engine/cep-sliding-windows-con.adoc[leveloffset=+2]
include::decision-engine/cep-sliding-windows-proc.adoc[leveloffset=+3]
include::decision-engine/cep-memory-management-con.adoc[leveloffset=+2]
include::decision-engine/con-engine-queries.adoc[leveloffset=+1]
////
include::decision-engine/con-engine-event-listeners.adoc[leveloffset=+1]
//include::decision-engine/proc-logging-decision-engine.adoc[leveloffset=+2]
