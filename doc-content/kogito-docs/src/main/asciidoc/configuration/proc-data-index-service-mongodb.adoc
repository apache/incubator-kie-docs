[id='proc-data-index-service-mongodb_{context}']
= Enabling MongoDB persistence for {PRODUCT} Data Index Service

Instead of Infinispan-based persistence, you can choose to store the data for {PRODUCT} Data Index Service in MongoDB persistence store.

.Prerequisites
* https://www.mongodb.com/[MongoDB Server] 3.6 or later is installed and running. For information about MongoDB installation and configuration, see the https://docs.mongodb.com/manual/installation/[MongoDB documentation].

.Procedure
. Configure your {PRODUCT} project to enable MongoDB persistence.
. Go to the https://repository.jboss.org/org/kie/kogito/data-index-service-mongodb/[`data-index-service-mongodb`] artifacts page, select the latest release of the Data Index Service, and download the `data-index-service-mongodb-__VERSION__-runner.jar` file to a local directory.
. In a command terminal, navigate to the directory location of the downloaded `data-index-service-mongodb-__VERSION__-runner.jar` file and enter the following command to run the Data Index Service with the required MongoDB connection information:
+
--
.Running the Data Index Service
[source,subs="+quotes"]
----
$ java  \
  -Dquarkus.mongodb.connection-string=__MONGODB_SERVER_CONNECTION_STRING__ \
  -Dquarkus.mongodb.database=__DATABASE_NAME__ \
  -jar data-index-service-mongodb-__VERSION__-runner.jar
----

For more information about MongoDB configuration on Quarkus, see https://quarkus.io/guides/mongodb#quarkus-mongodb_configuration[MongoDB client] in the Quarkus documentation.
--
. Once Data Index Service is running, follow step 4 and 5 of using Data Index Service to run your {PRODUCT} project and query the data. See
ifdef::KOGITO[]
{URL_CONFIGURING_KOGITO}#proc-data-index-service-using_kogito-configuring[_{CONFIGURING_KOGITO}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:proc-data-index-service-using_kogito-configuring[].
endif::[]

NOTE: Indexes are created on the every attribute that is annotated with `@Indexed` and `@Field` in the protobuf files. However, a single MongoDB collection can have no more than 64 indexes, including the default `_id` Index.
