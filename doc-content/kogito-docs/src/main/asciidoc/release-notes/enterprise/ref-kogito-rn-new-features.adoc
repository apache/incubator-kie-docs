[id='ref-kogito-rn-new-features_{context}']
= New features in {PRODUCT} {PRODUCT_VERSION}

The following sections describe some of the new features or enhancements in {PRODUCT} {PRODUCT_VERSION}.

== {PRODUCT} runtimes

=== New {PRODUCT} example applications with OptaPlanner

The following {PRODUCT} example applications with OptaPlanner integration are now available:

* https://github.com/kiegroup/kogito-examples/tree/master/process-optaplanner-quarkus[`process-optaplanner-quarkus`]: OptaPlanner example for {PRODUCT} on Quarkus
* https://github.com/kiegroup/kogito-examples/tree/master/process-optaplanner-springboot[`process-optaplanner-springboot`]: OptaPlanner example for {PRODUCT} on Spring Boot

These example applications illustrate how to use OptaPlanner to optimize planning resources in a sample airline process service.

For more information about OptaPlanner integration with {PRODUCT}, see the https://docs.optaplanner.org/latestFinal/optaplanner-docs/html_single/index.html#integrationWithQuarkus[OptaPlanner documentation].

For more information about running {PRODUCT} example applications, see
ifdef::KOGITO[]
{URL_CREATING_RUNNING}#proc-kogito-app-examples-running_kogito-creating-running[_{CREATING_RUNNING}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:proc-kogito-app-examples-running_kogito-creating-running[].
endif::[]

=== BPMN support updates

The following Business Process Model and Notation (BPMN) components have been added in {PRODUCT}:

* *Ad hoc subprocess*: Contains embedded inner activities and is intended to be executed with a more flexible ordering compared to the typical routing of processes
* *Milestone*: Represents a single point of achievement within a process instance, typically for triggering other tasks or tracking the progress of the process

For more information about BPMN support in {PRODUCT}, see
ifdef::KOGITO[]
{URL_PROCESS_SERVICES}[_{PROCESS_SERVICES}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:chap-kogito-developing-process-services[].
endif::[]

=== CloudEvents support for BPMN milestones

Information about milestones from Business Process Model and Notation (BPMN) process models is now included in https://cloudevents.io/[CloudEvents] messaging in {PRODUCT} services. This information includes the milestone `id`, `name`, and `status`, as shown in the following CloudEvents response body:

.CloudEvents response body with milestones information
[source,json]
----
{
  "data": {
    "endDate": "2019-08-20T19:26:02.092Z[UTC]",
    "id": "c2fa5c5e-3002-44c7-aef7-bce82297e3fe",
    "parentInstanceId": "f8868a2e-1bbb-47eb-93cf-fa46ff9dbfee",
    "processId": "hotelBooking",
    "processName": "HotelBooking",
    "rootInstanceId": "f8868a2e-1bbb-47eb-93cf-fa46ff9dbfee",
    "rootProcessId": "travels",
    "startDate": "2019-08-20T19:26:02.091Z[UTC]",
    "state": 2,
    "milestones": [
      {
        "id": "_18950AC4-664B-465E-B99E-766D38D362BF",
        "name": "AutoStartMilestone",
        "status": "AVAILABLE"
      }
    ]
  },
  "id": "b50a3dd4-a955-49c4-a055-f30a4d768f87",
  "kogitoParentProcessinstanceId": "f8868a2e-1bbb-47eb-93cf-fa46ff9dbfee",
  "kogitoProcessId": "hotelBooking",
  "kogitoProcessinstanceId": "c2fa5c5e-3002-44c7-aef7-bce82297e3fe",
  "kogitoProcessinstanceState": "2",
  "kogitoRootProcessId": "travels",
  "kogitoRootProcessinstanceId": "f8868a2e-1bbb-47eb-93cf-fa46ff9dbfee",
  "kogitoAddons": "jobs-management,prometheus-monitoring,process-management",
  "specversion": "0.3",
  "time": "2019-08-20T21:26:02.110668+02:00[Europe/Warsaw]",
  "type": "ProcessInstanceEvent",
  "source": "/hotelBooking"
}
----

=== Ability to cancel or retrigger active node instances in the {PRODUCT} Management Console

In the {PRODUCT} Management Console, you can now use the *Timeline* panel in the process instance details page to cancel or retrigger active node instances:

.Cancel or retrigger a node instance in active state
image::kogito/bpmn/kogito-management-console-node-cancel-retrigger.png[Image of retrigger and cancel options in timeline of Management Console]

For more information about the {PRODUCT} Management Console, see
ifdef::KOGITO[]
{URL_PROCESS_SERVICES}#con-management-console_kogito-developing-process-services[_{PROCESS_SERVICES}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:con-management-console_kogito-developing-process-services[].
endif::[]

== {PRODUCT} Operator and CLI

=== New `KogitoBuild` custom resource

The {PRODUCT} Operator now supports a `KogitoBuild` custom resource that you can use to build {PRODUCT} services separately before deploying them. When you use this custom resource, you can also specify the type of OpenShift Source-to-Image (S2I) build, such as from binary, from a remote Git repository, or from a local file (DMN, BPMN, or DRL).

For an example configuration that uses the `KogitoBuild` custom resource to link builds with service deployments on OpenShift, see the https://github.com/kiegroup/kogito-cloud-operator/blob/master/examples/process-quarkus-example-runtime-build.yaml[`process-quarkus-example-runtime-build.yaml`] example file.

=== Integration with the Events API

When the {PRODUCT} Operator deploys a new resource, you can now view additional information about the created resources in the Kubernetes or OpenShift Events console without having to rely on the log of the {PRODUCT} Operator pod. This integration will be improved in a future release to provide more meaningful information about the operator-controlled resources.

== {PRODUCT} supporting services

=== {PRODUCT} Data Index Service support for BPMN milestones

The {PRODUCT} Data Index Service now enables you to retrieve milestone information as part of the `ProcessInstances` object in GraphQL. You can filter results by milestone `id`, `name`, and `status`, as shown in the following GraphQL queries:

.Supported GraphQL query format for retrieving milestone information
[source]
----
{
  ProcessInstances {
    milestones {
      id
      name
      status
  }
}}
----

.Example GraphQL query for process instances by milestone name
[source]
----
{
  ProcessInstances(where: {milestones: {name: {equal: "AMilestoneName"}}}) {
    id
  }
}
----

.Example GraphQL query for process instances by milestone status
[source]
----
{
  ProcessInstances(where: {milestones: {status: {in: [AVAILABLE, ACTIVE] }}}) {
    id
  }
}
----

For more information about using the {PRODUCT} Data Index Service to query application data, see
ifdef::KOGITO[]
{URL_CONFIGURING_KOGITO}#con-data-index-service_kogito-configuring[_{CONFIGURING_KOGITO}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:con-data-index-service_kogito-configuring[].
endif::[]

== {PRODUCT} tooling

=== {PRODUCT} VSCode extension now available in Visual Studio Marketplace

Beginning in VSCode 1.46.0, the {PRODUCT} VSCode extension is now available in Visual Studio Marketplace. {PRODUCT} provides a *{PRODUCT} Bundle* VSCode extension that enables you to design Decision Model and Notation (DMN) decision models, Business Process Model and Notation (BPMN) 2.0 business processes, and test scenarios directly in VSCode. {PRODUCT} also provides individual *DMN Editor* and *BPMN Editor* VSCode extensions for DMN or BPMN support only, if needed.

To install the {PRODUCT} VSCode extension directly in VSCode, select the *Extensions* menu option in VSCode and search for and install the *{PRODUCT} Bundle* extension.

For more information about {PRODUCT} modeler extensions and applications, see
ifdef::KOGITO[]
{URL_CREATING_RUNNING}#con-kogito-modelers_kogito-creating-running[_{CREATING_RUNNING}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:con-kogito-modelers_kogito-creating-running[].
endif::[]

=== Test scenarios now supported by the {PRODUCT} VSCode extension

The {PRODUCT} https://github.com/kiegroup/kogito-tooling/releases[VSCode extension] now supports `.scesim` (scenario simulation) files that you can use to define test scenarios in the test scenario modeler in Visual Studio Code (VSCode).

Test scenarios in {PRODUCT} enable you to validate the functionality of business decisions and business decision data during project development. With a test scenario, you use data from your project to set given conditions and expected results based on one or more defined business decisions. When you run the scenario, the expected results and actual results of the decision instance are compared. If the expected results match the actual results, the test is successful. If the expected results do not match the actual results, then the test fails.

.Example test scenarios for `PersonDecisions` DMN decision logic
image::kogito/creating-running/kogito-test-scenario-example-person.png[Image of PersonDecisionsTest test scenario]

For more information about test scenarios, see
ifdef::KOGITO[]
{URL_DECISION_SERVICES}#con-test-scenarios_test-scenarios[_{DECISION_SERVICES}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:con-test-scenarios_test-scenarios[].
endif::[]

IMPORTANT: Test scenarios in {PRODUCT} currently support DMN decision services only. Test scenarios will support Drools Rule Language (DRL) decision services in a future release.

=== Improvements to the {PRODUCT} VSCode extension

The {PRODUCT} VSCode extension has been updated to incorporate enhancements and fixes from the VSCode API 1.45.0. Enhancements and fixes include improved undo, redo, asynchronous save, save as, and backup options in VSCode.

For more details about these {PRODUCT} VSCode extension enhancements, see https://issues.redhat.com/browse/KOGITO-1863[KOGITO-1863] in Atlassian Jira.

For more information about other VSCode API enhancements, see the https://code.visualstudio.com/updates/v1_45[April 2020 (version 1.45.0)] VSCode release notes.

=== Improvements to the {PRODUCT} BPMN modeler

The {PRODUCT} BPMN modeler includes the following notable improvements:

* Support for variable tagging in processes [https://issues.redhat.com/browse/KOGITO-1020[KOGITO-1020]]
* Ability to use the file name as the process ID [https://issues.redhat.com/browse/KOGITO-1354[KOGITO-1354]]
* Ability to import work item definitions from external files [https://issues.redhat.com/browse/KOGITO-1426[KOGITO-1426]]

For more information about process services in {PRODUCT}, see
ifdef::KOGITO[]
{URL_PROCESS_SERVICES}[_{PROCESS_SERVICES}_]
endif::[]
ifdef::KOGITO-COMM[]
xref:chap-kogito-developing-process-services[]
endif::[]

=== DMN included models in the {PRODUCT} DMN modeler in VSCode

The {PRODUCT} Decision Model and Notation (DMN) modeler in VSCode contains a new *Included Models* tab that you can use to include other DMN models from your project in a specified DMN file. When you include a DMN model within another DMN file, you can reuse the decision requirements diagram (DRD) nodes and logic of the included model in that DMN file. This enhancement helps you more efficiently integrate DMN logic between different DMN models in your project.

For more information about DMN included models in {PRODUCT}, see
ifdef::KOGITO[]
{URL_DECISION_SERVICES}#proc-dmn-included-models-dmn_dmn-models[_{DECISION_SERVICES}_].
endif::[]
ifdef::KOGITO-COMM[]
xref:proc-dmn-included-models-dmn_dmn-models[].
endif::[]

=== DMN guided tour in the {PRODUCT} DMN modeler in online viewer

The {PRODUCT} Decision Model and Notation (DMN) modeler in the Business Modeler online viewer provides a new guided tour when you open the modeler for the first time. The DMN guided tour shows the main modeler features and workflows to help you get started. You can dismiss the guided tour prompts at any time and the prompts do not appear again.

=== Improvements to {PRODUCT} business modelers

The {PRODUCT} business modelers, including VSCode, desktop, online, and Chrome extensions, include the following notable improvements:

* Keyboard shortcut support for Linux, Windows, and Mac operating systems. To view available shortcuts, click the keyboard icon in the lower-left corner of the BPMN or DMN canvas in any {PRODUCT} business modeler.
* Support for undo, redo, and asynchronous save in all {PRODUCT} business modelers. This improvement also provides `Is Dirty` indicators that help you avoid losing unsaved data.
