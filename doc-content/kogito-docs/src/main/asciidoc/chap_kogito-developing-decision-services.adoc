[id='chap_kogito-developing-decision-services']

= Developing decision services with {PRODUCT}
:context: kogito-developing-decision-services

// Purpose statement for the assembly
As a developer of business decisions, you can use {PRODUCT} business automation to develop decision services using Decision Model and Notation (DMN) models, Drools Rule Language (DRL) rules, XLS or XLSX spreadsheet decision tables, or a combination of all three methods.

// Modules - concepts, procedures, refs, etc.

include::decision-authoring-general/ref_decision-authoring-assets.adoc[leveloffset=+1]
include::creating-running/ref_kogito-app-examples.adoc[leveloffset=+1]

= Using DMN models in {PRODUCT} services
:context: dmn-models

As a business analyst or business rules developer, you can use Decision Model and Notation (DMN) to model a decision service graphically in a decision requirements diagram (DRD). This diagram consists of one or more decision requirements graphs (DRGs) that trace business decisions from start to finish, with each decision node using logic defined in DMN boxed expressions such as decision tables.

{PRODUCT} provides design and runtime support for DMN 1.2 models at conformance level 3, and runtime-only support for DMN 1.1 and 1.3 models at conformance level 3. You can design your DMN models with the {PRODUCT} DMN designer in VSCode or import existing DMN models into your {PRODUCT} projects for deployment and execution. Any DMN 1.1 models that you import into your {PRODUCT} project, open in the DMN designer, and save are converted to DMN 1.2 models. DMN 1.3 models are not supported in the {PRODUCT} DMN designer.

For more information about DMN, see the Object Management Group (OMG) https://www.omg.org/spec/DMN[Decision Model and Notation specification].

include::dmn/con_dmn.adoc[leveloffset=+1]
include::dmn/con_dmn-conformance-levels.adoc[leveloffset=+2]
include::dmn/ref_dmn-drd-components.adoc[leveloffset=+2]
include::dmn/con_dmn-feel.adoc[leveloffset=+2]
include::dmn/con_dmn-names.adoc[leveloffset=+3]
include::dmn/ref_dmn-data-types.adoc[leveloffset=+3]
include::dmn/con_dmn-boxed-expressions.adoc[leveloffset=+2]
include::dmn/con_dmn-decision-tables.adoc[leveloffset=+3]
include::dmn/con_dmn-decision-tables-hit-policies.adoc[leveloffset=+4]
include::dmn/con_dmn-literal-expressions.adoc[leveloffset=+3]
include::dmn/con_dmn-context-expressions.adoc[leveloffset=+3]
include::dmn/con_dmn-relation-expressions.adoc[leveloffset=+3]
include::dmn/con_dmn-function-expressions.adoc[leveloffset=+3]
include::dmn/con_dmn-invocation-expressions.adoc[leveloffset=+3]
include::dmn/ref_dmn-model-example.adoc[leveloffset=+2]
include::dmn/con_dmn-support.adoc[leveloffset=+1]
//@comment: Under investigation for Kogito. (Stetson, 5 March 2020)
//include::dmn/ref_dmn-properties.adoc[leveloffset=+2]
ifdef::KOGITO-COMM[]
include::dmn/ref_dmn-feel-enhancements.adoc[leveloffset=+2]
include::dmn/ref_dmn-model-enhancements.adoc[leveloffset=+2]
endif::[]
include::dmn/proc_dmn-model-creating.adoc[leveloffset=+1]
include::dmn/proc_dmn-logic-defining.adoc[leveloffset=+2]
include::dmn/proc_dmn-data-types-defining.adoc[leveloffset=+2]
//@comment: Not yet applicable for Kogito. (Stetson, 5 March 2020)
//include::dmn/con_dmn-included-models.adoc[leveloffset=+2]
//include::dmn/proc_dmn-included-models-dmn.adoc[leveloffset=+3]
//include::dmn/proc_dmn-included-models-pmml.adoc[leveloffset=+3]
include::dmn/con_dmn-documentation.adoc[leveloffset=+2]
include::dmn/ref_dmn-designer-nav.adoc[leveloffset=+2]
//@comment: Not yet applicable for Kogito. (Stetson, 5 March 2020)
//include::dmn/con_dmn-execution.adoc[leveloffset=+1]
//include::dmn/proc_dmn-execution-embedded.adoc[leveloffset=+2]
//include::dmn/proc_dmn-execution-remote-java.adoc[leveloffset=+2]
//include::dmn/proc_dmn-execution-rest.adoc[leveloffset=+2]
include::creating-running/con_kogito-service-execution.adoc[leveloffset=+1]

= Using DRL rules in {PRODUCT} services
:context: drl-rules

As a business rules developer, you can define business rules using Drools Rule Language (DRL) directly in free-form `.drl` text files. A DRL file can contain one or more rules that define at a minimum the rule conditions (`when`) and actions (`then`).

//@comment I think we can merge this with rule units (evacchi, 2020-03-14) 
// include::drl/con_drl-packages.adoc[leveloffset=+2] 
include::drl/con_drl.adoc[leveloffset=+1]
//@comment shall we move here type declarations? (evacchi, 2020-03-17)
// added this section â¬‡
include::drl/con_drl-data-sources.adoc[leveloffset=+2]
include::drl/con_drl-rule-units.adoc[leveloffset=+2]
include::drl/con_drl-imports.adoc[leveloffset=+2]
include::drl/con_drl-queries.adoc[leveloffset=+2]
//@comment this should go in a "legacy" section (evacchi, 2020-03-14)
// include::drl/con_drl-functions.adoc[leveloffset=+2]
include::drl/con_drl-declarations.adoc[leveloffset=+2]
include::drl/con_drl-declarations-without-metadata.adoc[leveloffset=+3]
include::drl/con_drl-declarations-enumerative.adoc[leveloffset=+3]
include::drl/con_drl-declarations-extended.adoc[leveloffset=+3]
include::drl/con_drl-declarations-with-metadata.adoc[leveloffset=+3]
include::drl/ref_drl-declarations-metadata-tags.adoc[leveloffset=+3]
include::decision-engine/con_property-change-listeners.adoc[leveloffset=+3]
//@comment: this is outdated, the extra Maven plug-in in http://blog.athico.com/2020/03/kogito-ergo-rules-from-knowledge-to.html
// is used to avoid all of this, so that you can refer to type declarations directly (evacchi, 2020-03-14) 
// include::drl/con_drl-declarations-access.adoc[leveloffset=+3]
//@comment maybe update and move to a legacy section (evacchi, 2020-03-14)
// include::drl/con_drl-globals.adoc[leveloffset=+2]
include::drl/ref_rules-attributes.adoc[leveloffset=+2]
//@comment I don't think we can document this feature at this time (evacchi, 2020-03-17) 
//include::drl/con_drl-timers-calendars.adoc[leveloffset=+3]
//@comment legacy syntax section? (evacchi, 2020-03-16) 
// include::drl/con_drl-rules-conditions.adoc[leveloffset=+2]
include::drl/con_drl-rules-oopath.adoc[leveloffset=+2]
include::drl/ref_drl-operators.adoc[leveloffset=+3]
include::drl/ref_drl-operator-precedence.adoc[leveloffset=+3]
include::drl/ref_drl-rules-conditions-elements.adoc[leveloffset=+3]
ifdef::KOGITO-COMM[]
include::drl/ref_drl-rules-conditions-elements-diagrams.adoc[leveloffset=+3]
endif::[]
include::drl/con_drl-rules-actions.adoc[leveloffset=+2]
//@comment mostly superseded by data source 
//include::drl/ref_drl-rules-actions-methods.adoc[leveloffset=+3]
//@comment outdated, unnecessary: let's substitute this for a section explaining data source methods -- see above (evacchi, 2020-03-17) 
// include::drl/ref_drl-rules-actions-methods-variables.adoc[leveloffset=+3]
//@comment outdated, unnecessary (evacchi, 2020-03-17) 
// include::drl/con_drl-rules-actions-advanced.adoc[leveloffset=+3]
include::drl/con_drl-rules-comments.adoc[leveloffset=+2]
include::drl/ref_drl-rules-errors.adoc[leveloffset=+2]
//@comment we must re-consolidate the rule unit section and re-create the following (evacchi, 2020-03-17) 
include::drl/proc_drl-rules-create.adoc[leveloffset=+1]
include::drl/proc_drl-rules-conditions.adoc[leveloffset=+2]
include::drl/proc_drl-rules-actions.adoc[leveloffset=+2]
include::creating-running/con_kogito-service-execution.adoc[leveloffset=+1]

= Using spreadsheet decision tables in {PRODUCT} services
:context: decision-tables

As a business rules developer, you can define business rules in a tabular format in spreadsheet decision tables and then include the spreadsheet file in your {PRODUCT} project. These rules are compiled into Drools Rule Language (DRL) for the decision service in your project.

include::decision-tables/con_decision-tables.adoc[leveloffset=+1]
include::decision-tables/con_decision-tables-use-case.adoc[leveloffset=+1]
include::decision-tables/proc_decision-tables-creating.adoc[leveloffset=+1]
include::decision-tables/ref_decision-tables-rule-set-entries.adoc[leveloffset=+2]
include::decision-tables/ref_decision-tables-rule-table-entries.adoc[leveloffset=+2]
include::decision-tables/ref_decision-tables-attributes.adoc[leveloffset=+2]
include::creating-running/con_kogito-service-execution.adoc[leveloffset=+1]

= {DECISION_ENGINE_CAP} in {PRODUCT}
:context: decision-engine

As a business rules developer, your understanding of the {DECISION_ENGINE} in {PRODUCT} can help you design more effective business assets and a more scalable decision management architecture. The {DECISION_ENGINE} is the {PRODUCT} component that stores, processes, and evaluates data to execute business rules and to reach the decisions that you define. This document describes basic concepts and functions of the {DECISION_ENGINE} to consider as you create your business rule system and decision services in {PRODUCT}.

include::decision-engine/con_decision-engine.adoc[leveloffset=+1]
////
//Excluded for now, not applicable to Kogito, no replacement yet. (Stetson, 9 Mar 2020)
include::decision-engine/kie-sessions-con.adoc[leveloffset=+1]
include::decision-engine/kie-sessions-stateless-con.adoc[leveloffset=+2]
include::decision-engine/kie-sessions-stateless-globals-con.adoc[leveloffset=+3]
include::decision-engine/kie-sessions-stateful-con.adoc[leveloffset=+2]
include::decision-engine/kie-sessions-pools-con.adoc[leveloffset=+2]
////
//@comment evacchi not totally sure how to make it "flow" with OOPath @MarkP ?
include::decision-engine/con_inference-and-truth-maintenance.adoc[leveloffset=+1]
//@comment evacchi equality mode currently defaults to identity and there is really no real way to override. So I'd just leave this out for now
//include::decision-engine/con_fact-equality-modes.adoc[leveloffset=+2]
include::decision-engine/con_execution-control.adoc[leveloffset=+1]
//@comment evacchi Let's leave this out for now, we do not really support CEP or stateful evaluation at this stage
//include::decision-engine/con_rule-execution-modes.adoc[leveloffset=+2]
//@comment evacchi not 100% sure about this:
// include::decision-engine/con_fact-propagation-modes.adoc[leveloffset=+2]
//@comment evacchi currently not supported:
// include::decision-engine/con_agenda-filters.adoc[leveloffset=+2]
include::drl/con_drl-rule-units.adoc[leveloffset=+2]
include::decision-engine/con_phreak-algorithm.adoc[leveloffset=+1]
include::decision-engine/con_phreak-rule-evaluation.adoc[leveloffset=+2]
include::decision-engine/con_forward-and-backward-chaining.adoc[leveloffset=+3]
//@comment evacchi: missing content, will provide but can't ATM
// include::decision-engine/con_rule-base-configuration.adoc[leveloffset=+2]
//@comment evacchi: not currently supported
// include::decision-engine/con_phreak-sequential-mode.adoc[leveloffset=+2]
include::decision-engine/con_property-change-listeners.adoc[leveloffset=+2]
////
//Excluded for now, not yet supported in Kogito. (9 Mar 2020)
include::decision-engine/cep-con.adoc[leveloffset=+1]
include::decision-engine/cep-events-con.adoc[leveloffset=+2]
include::decision-engine/cep-events-proc.adoc[leveloffset=+2]
include::drl/ref_drl-declarations-metadata-tags.adoc[leveloffset=+2]
include::decision-engine/cep-modes-con.adoc[leveloffset=+2]
include::decision-engine/cep-negative-patterns.adoc[leveloffset=+3]
include::decision-engine/cep-temporal-operators.adoc[leveloffset=+2]
include::decision-engine/cep-clock-ref.adoc[leveloffset=+2]
include::decision-engine/cep-event-streams-con.adoc[leveloffset=+2]
include::decision-engine/cep-event-streams-proc.adoc[leveloffset=+3]
include::decision-engine/cep-sliding-windows-con.adoc[leveloffset=+2]
include::decision-engine/cep-sliding-windows-proc.adoc[leveloffset=+3]
include::decision-engine/cep-memory-management-con.adoc[leveloffset=+2]
include::decision-engine/con_engine-queries.adoc[leveloffset=+1]
////
include::decision-engine/con_engine-event-listeners.adoc[leveloffset=+1]
// include::decision-engine/proc_logging-decision-engine.adoc[leveloffset=+2]
