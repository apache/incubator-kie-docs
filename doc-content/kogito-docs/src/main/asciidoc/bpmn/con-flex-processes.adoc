[id='con-flex-processes_{context}']
= Flexible processes for case management in {PRODUCT}

{PRODUCT} does not support the https://www.omg.org/cmmn/[Case Management Model and Notation (CMMN) specification] for case management in process services. Instead, {PRODUCT} uses Business Process Model and Notation (BPMN) extensions to provide similar case-management functionality through _flexible processes_.

A flexible process in {PRODUCT} is any process definition that uses ad hoc components or other features that enable the process to be executed more flexibly than traditional processes. For example, a flexible process does not require a standard start event and does not require all nodes to be connected. Some of the typical components in flexible processes include the `Ad-Hoc` process property that enables the process to use ad hoc auto-start fragments and to not require strict start and end events, ad hoc subprocesses that contain embedded inner activities within another process, and milestones that flag or trigger tasks and events.

Similar to case files in CMMN, flexible processes enable you to define traditional processes with more flexibility when the execution path is not rigid. This flexibility is helpful when the process cannot be fully automated or when the scope of the process is difficult to measure. A typical example of a case or flexible process is related to healthcare. A patient has a file that is accessible to the doctor and to any health professionals (or _knowledge workers_) who are assigned to the patient. These assigned workers take action and make different decisions and assessments until the patient is diagnosed and treated, completing the case or flexible process.

{PRODUCT} currently supports the following key case-related features in flexible processes:

* *Ad hoc processes*: An ad hoc process is any process definition that has the `Ad-Hoc` property enabled in the process diagram *Properties* panel. This property enables the process to use ad hoc auto-start fragments, such as ad hoc subprocesses and ad hoc tasks, and to not require strict start and end events. An ad hoc process is similar to a Case in CMMN.
+
.Ad hoc process property
image::kogito/bpmn/bpmn-ad-hoc-process.png[Image of Ad-Hoc process property]
* *Ad hoc subprocesses*: An ad hoc subprocess contains embedded inner activities within another process and is a standard BPMN component that is supported in {PRODUCT}. An ad hoc subprocess is similar to a Stage in CMMN.
+
.Ad hoc subprocess node
image::kogito/bpmn/bpmn-adhoc-subprocess.png[Image of ad hoc subprocess node in process designer]
* *Ad hoc auto-start fragments*: An ad hoc auto-start fragment is any ad hoc process, ad hoc subprocess, or ad hoc task with the `AdHoc Autostart` property enabled. This property enables the fragment to automatically start when the process is created instead of being started by the completion of the previous node or by a signal event.
+
.Ad hoc auto-start property
image::kogito/bpmn/bpmn-adhoc-subprocess-autostart.png[Image of ad hoc subprocess node in process designer]
* *Milestones*: A milestone is a standard CMMN component that is incorporated in {PRODUCT} as a BPMN custom task. A milestone represents a single point of achievement within a process instance. You can use milestones to flag certain events to trigger other tasks or track the progress of the process.
+
.Milestone node
image::kogito/bpmn/bpmn-milestone.png[Image of Mileston node in process designer]
* *REST API requests as signals*: A REST API request can serve as a signal event to trigger milestones or to create and start ad hoc fragments such as ad hoc processes, ad hoc subprocesses, or tasks. For non-flexible processes, an empty `POST` request for a process triggers the start node, whereas in a flexible process, the request creates the process instance. Similarly for ad hoc tasks, an empty `POST` request instantiates the task node. All ad hoc auto-start fragments with the `AdHoc Autostart` property enabled are started automatically when the process is created.
+
.Example curl request to add comments to a ticket
[source]
----
curl -D -XPOST -H 'Content-Type:application/json' -H 'Accept:application/json' http://localhost:8080/serviceDesk/b3c75b24-2691-4a76-902c-c9bc29ea076c/ReceiveSupportComment
----
+
.Example response (JSON)
[source,json]
----
HTTP/1.1 201 Created
Content-Length: 305
Location: http://localhost:8080/serviceDesk/b3c75b24-2691-4a76-902c-c9bc29ea076c/ReceiveSupportComment/f3b36cf9-3953-43ae-afe6-2a48fea8a79a
Content-Type: application/json

{
  "id":"b3c75b24-2691-4a76-902c-c9bc29ea076c",
  "supportCase":{
    "product": {
      "name":"Kogito",
      "family":"Middleware"
    },
    "description":"Kogito is not working for some reason.",
    "engineer":"kelly",
    "customer":"Paco the customer",
    "state":"WAITING_FOR_OWNER",
    "comments":null,
    "questionnaire":null
  },
  "supportGroup":"Kogito"
}
----
