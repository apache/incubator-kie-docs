[id='lambda-externalisation']

= Drools' Executable Model Lambda Externalisation Optimization

There's a new optimizatino for {PRODUCT} executable model that should improve memory consumption at runtime. It can be enabled by using the key

```
 -Ddrools.externaliseCanonicalModelLambda=true
```

What it does is rewriting how the lambdas used in the executable model are generated.
Now instead of being inlined with the rest of the code they are placed in external classes.
This has a twofold important advantage:

1. the same predicate can be reused multiple times by all the patterns with the same constraint and
2. the whole executable model (excluding the lambdas) is now garbage collectable once the rete/phreak network has been instanced from it.

These two advantages should bring a far better memory performance, but it could also lead to some OutOfMemory error.
